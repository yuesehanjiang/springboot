webpackJsonp([3],{"+lfT":function(t,e,a){"use strict";e.c=function(t){return Object(i.a)({method:"post",url:"/gym/userShow/listUserShowInfo",data:t})},e.a=function(t){return Object(i.a)({method:"post",url:"/gym/userShow/saveUserShow",data:t,headers:{"Content-Type":"multipart/form-data"}})},e.d=function(t){return Object(i.a)({method:"post",url:"/gym/userShow/getUserShow",data:t})},e.e=function(t){return Object(i.a)({method:"post",url:"/gym/userShow/updateUserShow",data:t,headers:{"Content-Type":"multipart/form-data"}})},e.b=function(t){return Object(i.a)({method:"post",url:"/gym/userShow/delUserShow",data:t})};var i=a("vLgD")},UZSd:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("jAzQ"),a("+BTi");var i=a("wOhx"),s=a.n(i),n=a("+lfT"),r=a("X1cf"),o=a("E4LH"),l={components:{Breadcrumb:r.a,Upload:s.a},data:function(){return{preview:"",form:{image:"",nickname:"",sex:"1",signature:""},isSubmitting:!1,isGettingData:!1}},watch:{"form.image":function(t){var e=this;if("string"!=typeof t){var a=new FileReader;a.readAsDataURL(this.form.image),a.addEventListener("load",function(){e.preview=a.result},{once:!0})}}},mounted:function(){var t=this;this.$route.params.id&&(this.isGettingData=!0,Object(n.d)({id:this.$route.params.id}).then(function(e){200===Number(e.code)?(t.isGettingData=!1,t.form.nickname=e.data.nickname,t.form.sex=e.data.sex,t.form.signature=e.data.signature,t.preview=e.data.image):t.$message({message:e.message,type:"error",onClose:function(){t.$router.back()}})}))},methods:{beforeUpload:function(t){var e="3M",a=3145728;return-1===["image/jpg","image/jpeg","image/png","image/bmp"].indexOf(t.type)?(this.$message({message:"文件格式错误，请上传jpg,jpeg,png,bmp文件",type:"warning"}),!1):t.size>a?(this.$message({message:"文件太大，请上传"+e+"以下的文件",type:"warning"}),!1):(this.form.image=t,!1)},validate:function(){return this.preview?!o.a.isNullString(this.form.nickname)||(this.$message({message:"请输入用户名称",type:"warning"}),!1):(this.$message({message:"请上传照片",type:"warning"}),!1)},handleSubmit:function(){this.validate()&&this.postData()},getFormData:function(){var t=new FormData;return this.form.image&&t.append("file",this.form.image),t.append("nickname",this.form.nickname),t.append("sex",this.form.sex),t.append("signature",this.form.signature),t.append("gymAddr",this.$store.state.token),t},postData:function(){var t=this;this.isSubmitting=!0;var e=this.getFormData(),a=void 0;this.$route.params.id?(e.append("id",this.$route.params.id),a=n.e):a=n.a,a(e).then(function(e){200===Number(e.code)?(t.$router.back(),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"warning"})}).finally(function(){t.isSubmitting=!1})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PageBody",[a("Breadcrumb",[a("router-link",{attrs:{tag:"li",to:"/show"}},[t._v("会员秀")]),t._v(" "),a("li",[t._v("添加会员秀")])],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isGettingData,expression:"isGettingData"}],staticClass:"detail-form"},[a("div",{staticClass:"detail-item"},[a("div",{staticClass:"detail-label"},[t._v("上传照片")]),t._v(" "),a("div",{staticClass:"detail-control"},[a("Upload",{attrs:{action:"noAction","before-upload":t.beforeUpload}},[a("div",{staticClass:"picture-uploader"},[t.preview?a("img",{staticClass:"preview-img",attrs:{src:t.preview,alt:""}}):a("i",{staticClass:"add-picture-icon"})])])],1)]),t._v(" "),a("div",{staticClass:"detail-item"},[a("div",{staticClass:"detail-label"},[t._v("用户名称")]),t._v(" "),a("div",{staticClass:"detail-control"},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入用户名称"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1)]),t._v(" "),a("div",{staticClass:"detail-item"},[a("div",{staticClass:"detail-label"},[t._v("用户性别")]),t._v(" "),a("div",{staticClass:"detail-control"},[a("Select",{staticStyle:{width:"200px"},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("Option",{attrs:{value:"1"}},[t._v("男")]),t._v(" "),a("Option",{attrs:{value:"0"}},[t._v("女")])],1)],1)]),t._v(" "),a("div",{staticClass:"detail-item"},[a("div",{staticClass:"detail-label"},[t._v("个性签名")]),t._v(" "),a("div",{staticClass:"detail-control"},[a("Input",{staticClass:"detail-text",attrs:{type:"textarea",placeholder:"请输入个性签名"},model:{value:t.form.signature,callback:function(e){t.$set(t.form,"signature",e)},expression:"form.signature"}})],1)]),t._v(" "),a("div",{staticClass:"detail-item"},[a("div",{staticClass:"detail-label"}),t._v(" "),a("div",{staticClass:"detail-control"},[a("button",{staticClass:"cancel-button",on:{click:function(){t.$router.back()}}},[t._v("取消")]),t._v(" "),a("button",{directives:[{name:"loading",rawName:"v-loading",value:t.isSubmitting,expression:"isSubmitting"}],staticClass:"confirm-button",on:{click:t.handleSubmit}},[t._v("确定")])])])])],1)},staticRenderFns:[]};var d=a("VU/8")(l,c,!1,function(t){a("ZnTM")},"data-v-7a393498",null);e.default=d.exports},X1cf:function(t,e,a){"use strict";var i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"breadcrumb-container"},[e("ul",{staticClass:"breadcrumb-list"},[this._t("default")],2)])},staticRenderFns:[]};var s=a("VU/8")(null,i,!1,function(t){a("Z5HE")},"data-v-090a826c",null);e.a=s.exports},Z5HE:function(t,e){},ZnTM:function(t,e){}});
//# sourceMappingURL=3.a570954a0e358b4fcca8.js.map