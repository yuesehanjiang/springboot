webpackJsonp([27],{"7DtG":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("SJI6"),s=a("BTi6"),r=a("y6zN"),n=a("OlMY"),l=a("/o5o"),o=a("hNqL"),u=a("cMGX"),c=a("oAV5"),d=a.n(c),p=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var a=[],i=!0,s=!1,r=void 0;try{for(var n,l=t[Symbol.iterator]();!(i=(n=l.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(t){s=!0,r=t}finally{try{!i&&l.return&&l.return()}finally{if(s)throw r}}return a}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},g={components:{Modal:l.a,Toast:o.a,GPagination:u.a,TableImage:n.a},data:function(){return{listData:[],storeList:[],isNullList:[{isNull:"",title:"全部"},{isNull:"0",title:"未识别"},{isNull:"1",title:"已识别"}],startTime:"",endTime:"",stores_id:"",datetime:"",isNull:"",keyword:"",isNoPower:!1,date:["",""],loading:!1,paganition:{},toastStatus:!1,toastData:{},userData:{}}},filters:{filtersAppoint:function(t){return 0===t?"否":"是"}},computed:{exportHref:function(){var t={user_id:this.userData.id},e=Object.assign({},t,this.$route.query);return delete e.pageNum,delete e.pageSize,"/goodfield/web/auditreport/export?"+Object.keys(e).map(function(t){return t+"="+(e[t]||"")}).join("&")}},watch:{$route:function(){this.getListData(Object.assign({},this.$route.query))},stores_id:function(){this.easyQuery({stores_id:this.stores_id,pageNum:0})},isNull:function(){this.easyQuery({pageNum:0,isNull:this.isNull})}},beforeCreate:function(){var t=this.$route.query,e=t.pageNum,a=t.pageSize,i=t.startTime,s=t.endTime,r=t.keyword,n=t.isNull,l=t.stores_id;if(Object.is(n,void 0)&&Object.is(r,void 0)&&Object.is(l,void 0)&&Object.is(e,void 0)&&Object.is(a,void 0)&&Object.is(i,void 0)&&Object.is(s,void 0))this.$router.replace({path:this.$route.path,query:{pageNum:0,pageSize:10,startTime:"",endTime:"",stores_id:"",isNull:n,keyword:""}});else if(""!==n){var o=Object.assign({},this.$route.query,{isNull:""});this.$router.replace({path:this.$route.path,query:o})}},mounted:function(){this.userData=Object(r.a)(),this.getListData(this.$route.query),this.$store.state.userMenuStatus&&this.$store.state.userMenuStatus.audit_report&&(Object(s.a)({user_id:this.userData.id}),this.setUserMenuStatus(Object.assign({},this.$store.state.userMenuStatus,{audit_report:!1})))},methods:h({},Object(i.mapMutations)({setUserMenuStatus:"SET_USER_MENU_STATUS"}),{easyQuery:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.$route.query,a=Object.assign({},e,t);this.$router.push({path:this.$route.path,query:a})},changeCurrentPage:function(t){var e=t.pageNum;this.easyQuery({pageNum:e})},changeCurrentSize:function(t){var e=t.pageSize;this.easyQuery({pageNum:"0",pageSize:e})},inputContent:d.a.throttle(function(){this.easyQuery({keyword:this.keyword,pageNum:0})},1e3,{leading:!1}),getListData:function(t){var e=this;this.loading=!0;var a=Object.assign({user_id:this.userData.id,stores_id:this.storeId,datetime:"",startTime:this.startTime,endTime:this.endTime,isNull:this.isNull},t);Object(s.c)(a).then(function(t){"200"===t.code?(e.listData=e.handleListData(t.data),e.storeList=e.handleStoreList(t.roles),e.paganition={pageSize:parseInt(t.pageSize),currentPage:parseInt(t.pageNum)+1,total:parseInt(t.total)}):"201"===t.code?(e.listData=[],e.storeList=e.handleStoreList(t.data)):"202"===t.code?(e.listData=[],e.isNoPower=!0):(e.listData=[],e.setToastData({message:t.message,type:"fail"})),e.loading=!1}).catch(function(){e.loading=!1})},handleListData:function(t){var e=this.$route.query,a=e.pageSize,i=e.pageNum;return t.forEach(function(t,e){t.index=a*i+e+1}),t},handleStoreList:function(t){var e=[{storeName:"全部门店",storeId:""}];return t.forEach(function(t){var a={storeId:t.stores_id,storeName:t.stores_name};e.push(a)}),e},changeDatePicker:function(t){var e=p(t,2),a=e[0],i=e[1];this.startTime=a,this.endTime=i,this.easyQuery({startTime:a,endTime:i,pageNum:0})},navigateToEditPicture:function(t,e,a){this.$router.push({path:"/user/audit_report/edit_picture/"+t,query:{operation:e,id:a}})},navigateToNotMemberPicture:function(){this.$router.push({path:"/user/audit_report/not_member_picture"})},setToastData:function(t){var e=this,a=t.message,i=t.type,s=t.callback;this.toastStatus=!0,this.$set(this.toastData,"message",a),this.$set(this.toastData,"type",i),setTimeout(function(){e.toastStatus=!1,s&&s()},1200)}})},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"list list-special"},[t._m(0),t._v(" "),t.isNoPower?i("div",{staticClass:"screen-empty"},[i("img",{attrs:{src:a("9Xu7"),alt:"empty_logo"}}),t._v(" "),i("p",{staticClass:"empty-title"},[t._v("没有模块权限，请与管理员确认")])]):i("div",[i("div",{staticClass:"list-header list-header-second"},[i("div",{staticClass:"list-header-left"},[i("div",{staticClass:"list-header-select-container"},[i("DatePicker",{staticStyle:{width:"260px"},attrs:{editable:!1,clearable:!0,size:"large",type:"daterange",transfer:"",placement:"bottom-end",placeholder:"选择日期"},on:{"on-change":t.changeDatePicker},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),i("div",{staticClass:"list-header-select-container"},[i("Select",{staticStyle:{width:"200px"},attrs:{size:"large",transfer:"",clearable:!0,placeholder:"门店"},model:{value:t.stores_id,callback:function(e){t.stores_id=e},expression:"stores_id"}},t._l(t.storeList,function(e){return i("Option",{key:e.storeId,attrs:{value:e.storeId}},[t._v(t._s(e.storeName)+"\n            ")])}))],1),t._v(" "),i("div",{staticClass:"list-header-select-container"},[i("Select",{staticStyle:{width:"120px"},attrs:{size:"large",transfer:"",clearable:!0,placeholder:"识别状态"},model:{value:t.isNull,callback:function(e){t.isNull=e},expression:"isNull"}},t._l(t.isNullList,function(t){return i("Option",{key:t.title,attrs:{value:t.isNull,label:t.title}})}))],1),t._v(" "),i("div",{staticClass:"list-header-input-container"},[i("i-input",{staticStyle:{width:"220px"},attrs:{clearable:!0,size:"large",placeholder:"姓名/会员ID/卡号搜索"},on:{input:t.inputContent},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[i("Icon",{attrs:{slot:"prefix",type:"ios-search-outline"},slot:"prefix"})],1)],1),t._v(" "),t.listData.length?i("a",{staticClass:"export-table",attrs:{href:t.exportHref}},[t._v("导出表格")]):t._e()]),t._v(" "),i("div",{staticClass:"list-header-right"},[i("span",{staticClass:"list-header-right-button",on:{click:t.navigateToNotMemberPicture}},[t._v("非会员图像库")])])]),t._v(" "),i("el-table",{staticClass:"audit-report",staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[i("el-table-column",{attrs:{prop:"index",label:"序号",align:"center",width:"65"}}),t._v(" "),i("el-table-column",{attrs:{width:"160",prop:"user_in_time",align:"center",label:"刷卡时间"}}),t._v(" "),i("el-table-column",{attrs:{prop:"stores_name",align:"center",label:"门店"}}),t._v(" "),i("el-table-column",{attrs:{prop:"user_name",align:"center",label:"会员名称"}}),t._v(" "),i("el-table-column",{attrs:{prop:"user_id",align:"center",label:"会员ID"}}),t._v(" "),i("el-table-column",{attrs:{prop:"user_card",align:"center",label:"卡号"}}),t._v(" "),i("el-table-column",{attrs:{prop:"user_pic",align:"center",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.user_pic?i("table-image",{attrs:{"table-image-url":e.row.user_pic}},[i("img",{staticClass:"table-pic",attrs:{src:e.row.user_pic,alt:"图像"}})]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"running_water",align:"center",label:"入场流水号"}}),t._v(" "),i("el-table-column",{attrs:{prop:"distinguish_id",align:"center",label:"识别ID"}}),t._v(" "),i("el-table-column",{attrs:{prop:"pic_path",align:"center",label:"图像"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"edit-image-cell"},[e.row.pic_path&&!Object.is(e.row.pic_path,"-/-")?i("table-image",{attrs:{"table-image-url":e.row.pic_path}},[i("img",{staticClass:"table-pic",attrs:{src:e.row.pic_path,alt:"图像"}})]):i("span",{staticClass:"edit-pic",on:{click:function(a){t.navigateToEditPicture(e.row.user_id,"add",e.row.id)}}},[t._v("调整图像")]),t._v(" "),e.row.pic_path&&"0"===e.row.flag?i("span",{staticClass:"edit-icon",on:{click:function(a){t.navigateToEditPicture(e.row.user_id,"edit",e.row.id)}}}):t._e()],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"appoint",align:"center",label:"约课情况"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"===e.row.appoint?i("span",[t._v("是")]):i("span",[t._v("否")])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"valid_member",align:"center",label:"是否有效会员"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"===e.row.valid_member?i("span",[t._v("是")]):i("span",[t._v("否")])]}}])})],1),t._v(" "),t.listData.length?i("g-pagination",{attrs:{total:t.paganition.total,"page-size":t.paganition.pageSize,"current-page":t.paganition.currentPage},on:{changeCurrentPage:t.changeCurrentPage,changeCurrentSize:t.changeCurrentSize}}):t._e()],1),t._v(" "),t.toastStatus?i("toast",{attrs:{message:t.toastData.message,type:t.toastData.type}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"list-header frsc"},[e("div",{staticClass:"list-title"},[this._v("稽核报告")])])}]};var v=a("VU/8")(g,_,!1,function(t){a("Tsew")},"data-v-746c1351",null);e.default=v.exports},Tsew:function(t,e){}});
//# sourceMappingURL=27.d28ed88c01b065c0e8fd.js.map