webpackJsonp([4],{"657a":function(e,t){},G9R7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("aZNZ"),r=a("y6zN"),i=a("mmiC"),n=a("oAV5"),o=a.n(n),u=a("OlMY"),l={components:{Breadcrumb:s.a,TableImage:u.a},data:function(){var e="member";return 0===this.$route.path.indexOf("/user/report/store/")&&(e="store"),{loading:!0,isEmpty:!1,listData:{},stores:[],stores_id:"",user_type:"",datetime:[],type:e,token:{}}},computed:{exportHref:function(){var e={user_id:this.token.id,u_id:this.$route.params.id},t=Object.assign({},e,this.$route.query);return delete t.pageNum,delete t.pageSize,"/goodfield/web/entrancereport/store/exportDetails?"+Object.keys(t).map(function(e){return e+"="+(t[e]||"")}).join("&")}},watch:{stores_id:function(e){this.easyQuery({pageNum:0,stores_id:void 0===e?"":String(e)})},user_type:function(e){this.easyQuery({pageNum:0,user_type:void 0===e?"1":String(e)})},$route:function(e){var t=e.query;this.getList(Object.assign({},t)),t.datetime?this.datetime=[t.datetime,t.datetime]:t.startTime&&t.endTime&&(this.datetime=[t.startTime,t.endTime])}},created:function(){this.easyQuery({pageNum:0,datetime:"",startTime:"",endTime:""})},mounted:function(){this.token=Object(r.a)(),this.getList(Object.assign({},this.$route.query))},methods:{dateChange:function(e){e[0]===e[1]?this.easyQuery({pageNum:0,datetime:e[0],startTime:"",endTime:""}):this.easyQuery({pageNum:0,datetime:"",startTime:e[0],endTime:e[1]})},easyQuery:function(e){var t=this.$route.query,a=Object.assign({},t,e);this.$router.push({path:this.$route.path,query:a})},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,t.u_id=this.$route.params.id,t.user_id=this.token.id,t.pageNum=t.pageNum||0,t.pageSize=t.pageSize||10,t.startTime||t.endTime||t.datetime||(t.datetime=o.a.formatStamp(this.defaultDay,"YYYY-MM-DD"));var a=void 0;"member"===this.type?a=i.b:(a=i.d,t.roleId=t.stores_id?t.stores_id:""),a(t).then(function(a){200===Number(a.code)?(e.isEmpty=!1,2===Number(t.user_type)&&(a.data=[a.data]),e.listData=e.countIndex(a),e.stores=a.roles):201===Number(a.code)?(e.isEmpty=!0,e.listData={}):(e.isEmpty=!0,e.listData={},e.$message({message:a.message,type:"error"})),e.loading=!1})},countIndex:function(e){var t=e.pageSize,a=e.pageNum;return e.data.forEach(function(e,s){e.index=t*a+s+1}),e},pageNumChange:function(e){this.easyQuery({pageNum:String(e-1)})},pageSizeChange:function(e){this.easyQuery({pageNum:String(0),pageSize:e})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"screen-container"},[a("Breadcrumb",[a("router-link",{attrs:{tag:"li",to:"/user/report/member"}},[e._v("入场报告")]),e._v(" "),this.listData.data&&this.listData.data[0]&&this.listData.data[0].user_name?a("li",[e._v("\n      "+e._s(this.listData.data[0].user_name)+"\n    ")]):e._e()],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"screen-body"},[a("div",{staticClass:"screen-body-header"},[a("DatePicker",{staticClass:"query-date",attrs:{type:"daterange",size:"default",transfer:!1,placeholder:"选择日期",value:e.datetime},on:{"on-change":e.dateChange}}),e._v(" "),a("Select",{staticClass:"query-select",staticStyle:{width:"200px"},attrs:{size:"default",clearable:!0,placeholder:"门店",transfer:!1,value:e.$route.query.stores_id},on:{"on-change":function(t){e.stores_id=t}}},e._l(e.stores,function(t){return a("Option",{key:t.stores_id,attrs:{value:t.stores_id}},[e._v(e._s(t.stores_name))])})),e._v(" "),e.listData.data&&e.listData.data.length?a("a",{staticClass:"export-table",attrs:{href:e.exportHref}},[e._v("导出表格")]):e._e()],1),e._v(" "),a("div",{staticClass:"screen-body-container"},[a("el-table",{staticClass:"list",staticStyle:{"text-align":"center"},attrs:{"header-cell-style":{"text-align":"center"},height:"100%",data:e.listData.data,border:""}},[2==e.$route.query.user_type?a("el-table-column",{attrs:{width:"70",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n              1\n            ")])]}}])}):a("el-table-column",{attrs:{prop:"index",width:"70",label:"序号"}}),e._v(" "),"store"===e.type?a("el-table-column",{attrs:{prop:"stores_name",label:"门店"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"会员姓名"}}),e._v(" "),"member"===e.type?a("el-table-column",{attrs:{prop:"stores_name",label:"门店"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"user_id",label:"会员ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_card",label:"卡号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_in_time",label:"入场时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.user_in_time))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"exclusive",label:"图像"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",["-/-"!==t.row.user_pic?a("div",["2"!==e.$route.query.user_type?a("table-image",{attrs:{"table-image-url":t.row.user_pic}},[a("img",{staticClass:"user-avatar",attrs:{src:t.row.user_pic,alt:"user-avatar"}})]):e._e()],1):a("span",[e._v("-/-")])])]}}])})],1)],1),e._v(" "),e.listData.data&&e.listData.data.length>0&&"2"!==e.$route.query.user_type?a("div",{staticClass:"screen-body-footer"},[a("Page",{attrs:{total:Number(e.listData.total),current:Number(e.listData.pageNum)+1,"page-size":Number(e.listData.pageSize),"show-sizer":"","show-elevator":"","show-total":"",transfer:!1},on:{"on-change":e.pageNumChange,"on-page-size-change":e.pageSizeChange}})],1):e._e()])],1)},staticRenderFns:[]};var c=a("VU/8")(l,d,!1,function(e){a("TW8C"),a("657a")},"data-v-ed7d5044",null);t.default=c.exports},TW8C:function(e,t){}});
//# sourceMappingURL=4.05b85550a90079e8d599.js.map