{"version":3,"sources":["webpack:///src/views/user/screen/List.vue","webpack:///./src/views/user/screen/List.vue?371e","webpack:///./src/views/user/screen/List.vue"],"names":["List","components","Modal","data","isWarning","isConfirming","isLoading","isEmpty","isNoPower","canSpread","isSpread","idNeedSpread","listData","spreadFolder","computed","tableData","Array","isArray","this","deletedMachines","machineCount","forEach","v","folder_id","push","storesArray","value","storesObject","storesName","stores_name","split","storesIds","stores_id","machinesName","machine_name_all","machineIds","machine_id_all","checkedMachineIds","machine_ids","checkedMachineName","machine_name","checkedMachines","map","i","id","name","index","indexOf","machine_id","splice","firstStore","storeLength","store","storeName","storeId","folderId","folderName","unlimited_time","status","startTime","endTime","rePlayDate","rePlayTime","table_index","machines","checked_machine_ids","join","more","machineName","machineId","spanSign","empty","type","$route","params","content_type","query","classify","watch","getList","Object","assign","beforeCreate","_$route$query","pageNum","pageSize","is","undefined","$router","replace","path","mounted","_this","token","tool","window","onresize","utils_default","a","throttle","checkSpread","firstCheck","setInterval","clearInterval","$store","state","userMenuStatus","screen","user_id","setUserMenuStatus","destroyed","methods","_extends","external__Vuex_","handleName","length","substr","handleDelete","folder","folderEmpty","Number","handleConfirm","_this2","then","res","code","$message","message","changeStatus","_this3","String","headerClick","column","property","cellClick","row","_this4","keys","$refs","filter","uls","offsetHeight","some","prototype","slice","call","childNodes","reduce","x","y","offsetWidth","ids","arraySpanMethod","_ref","columnIndex","rowIndex","rowspan","colspan","easyQuery","arguments","prevQuery","handleClassify","_this5","countIndex","pageNumChange","pageSizeChange","screen_List","render","_vm","_h","$createElement","_c","_self","staticClass","class","screen-primary","on","click","$event","_v","_e","directives","rawName","expression","_m","attrs","tag","to","src","__webpack_require__","alt","can-spread","is-spread","staticStyle","text-align","color","header-cell-style","height","span-method","border","header-cell-class-name","ref","header-click","cell-click","prop","width","label","scopedSlots","_u","key","fn","scope","_s","title","cursor","min-width","need-spread","_l","item","disabled","checked","font-size","margin","size","editable","transfer","clearable","multiple","confirm","trigger","placement","slot","total","current","page-size","show-sizer","show-elevator","show-total","on-change","on-page-size-change","modalTitle","cancelModal","confirmModal","hiddenCancelBtn","confirmText","clickShadowButNotCancel","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/28.b7ce42d095d4291385e0.js","sourcesContent":["<template>\n  <div class=\"screen-container\">\n    <div class=\"screen-btn-group\">\n      <button\n        class=\"screen-btn\" @click=\"handleClassify('picture')\"\n        :class=\"{'screen-primary':content_type===0}\">\n        图片\n      </button>\n      <button\n        v-if=\"$route.params.type!=='bottom'\"\n        class=\"screen-btn\" @click=\"handleClassify('video')\"\n        :class=\"{'screen-primary':content_type===1}\">\n        视频\n      </button>\n    </div>\n    <div class=\"screen-body\" v-loading=\"isLoading\">\n      <div class=\"btn-group\" v-if=\"!isNoPower\">\n        <p class=\"btn-group-left\">\n          <span class=\"help-icon\"></span>\n          <span class=\"operation-tips\">点击文件夹名称，可上传文件</span>\n        </p>\n        <router-link\n          tag=\"button\"\n          :to=\"{ path: $route.params.type+'/detail', query: { classify: this.$route.query.classify }}\"\n          class=\"add-btn\">\n          创建文件夹\n        </router-link>\n      </div>\n      <div class=\"screen-empty\" v-if=\"isEmpty\">\n        <img src=\"~@/assets/empty_logo.gif\" alt=\"empty_logo\">\n        <p class=\"empty-title\">还没有文件，请先\n          <router-link :to=\"{ path: $route.params.type+'/detail', query: { classify: this.$route.query.classify }}\">\n            创建文件夹\n          </router-link>\n        </p>\n      </div>\n      <div class=\"screen-empty\" v-else-if=\"isNoPower\">\n        <img src=\"~@/assets/empty_logo.gif\" alt=\"empty_logo\">\n        <p class=\"empty-title\">没有模块权限，请与管理员确认</p>\n      </div>\n      <template v-else>\n        <div class=\"screen-body-container list-container\" :class=\"{'can-spread':canSpread,'is-spread':isSpread}\">\n          <el-table\n            :header-cell-style=\"{'text-align': 'center'}\"\n            style=\"text-align: center;color:#666666\"\n            height=\"100%\"\n            :data=\"tableData\"\n            :span-method=\"arraySpanMethod\"\n            border\n            :header-cell-class-name=\"({columnIndex})=>columnIndex===3&&'spread-btn'\"\n            @header-click=\"headerClick\"\n            @cell-click=\"cellClick\">\n            <el-table-column\n              prop=\"table_index\"\n              width=\"68\"\n              label=\"序号\">\n              <template slot-scope=\"scope\">\n                <span>{{scope.row.table_index}}</span>\n                <i v-if=\"Number(scope.row.status)===1\" class=\"playing-icon\"></i>\n              </template>\n            </el-table-column>\n            <el-table-column\n              prop=\"folderName\"\n              width=\"120\"\n              label=\"文件夹\">\n              <template slot-scope=\"scope\">\n                <template v-if=\"scope.row.empty\">\n                  <span style=\"color:rgb(177, 177, 177)\">{{handleName(scope.row.folderName)}}</span>\n                </template>\n                <template v-else>\n                  <router-link tag=\"span\" :title=\"scope.row.folderName\" class=\"folder-link\"\n                               :to=\"'folder/'+scope.row.folderId\">{{handleName(scope.row.folderName)}}\n                  </router-link>\n                </template>\n              </template>\n            </el-table-column>\n            <el-table-column\n              width=\"158\"\n              prop=\"storeName\"\n              label=\"门店\">\n              <template slot-scope=\"scope\">\n                <template v-if=\"scope.row.empty\">\n                  <span style=\"color: #B1B1B1;\">-/-</span>\n                </template>\n                <template v-if=\"scope.row.more\">\n                  <div style=\"color:#217EE6;cursor: pointer\">\n                    {{spreadFolder.indexOf(scope.row.folderId)===-1?'更多':'收起'}}\n                  </div>\n                </template>\n                <template v-else>{{scope.row.storeName}}</template>\n              </template>\n            </el-table-column>\n            <el-table-column\n              :min-width=\"canSpread&&isSpread?canSpread:400\"\n              prop=\"machines\"\n              label=\"选择终端机\">\n              <template slot-scope=\"scope\">\n                <div v-if=\"scope.row.empty\">\n                  <span style=\"color: #B1B1B1;\">终端机的本地文件被删除，文件夹失效</span>\n                </div>\n                <div v-else-if=\"scope.row.machines.length===0\">\n                  <span style=\"color: #B1B1B1;\">请选择终端机</span>\n                </div>\n                <div v-else class=\"checkbox-list checkbox-readonly\"\n                     :class=\"{'need-spread':canSpread&&!isSpread&&idNeedSpread.indexOf(scope.row.folderId+'+'+scope.row.storeId)!==-1}\">\n                  <ul class=\"checkbox-ul\" :ref=\"'ul-'+scope.row.folderId+'+'+scope.row.storeId\">\n                    <li v-for=\"(item,index) in scope.row.machines\" :key=\"index\">\n                      <el-checkbox disabled :checked=\"scope.row.checked_machine_ids.indexOf(item.machineId)!==-1\">\n                        {{item.machineName}}\n                      </el-checkbox>\n                    </li>\n                  </ul>\n                </div>\n              </template>\n            </el-table-column>\n            <el-table-column\n              width=\"314px\"\n              label=\"播放时间\">\n              <template slot-scope=\"scope\">\n                <div style=\"font-size: 12px\">\n                  <template v-if=\"Number(scope.row.unlimited_time)===0\">\n                    不限时间\n                  </template>\n                  <template v-else-if=\"Number(scope.row.unlimited_time)===1\">\n                    <span>{{scope.row.startTime}}</span>\n                    <span style=\"margin: 0 14px;\">至</span>\n                    <span>{{scope.row.endTime}}</span>\n                  </template>\n                  <template v-else-if=\"Number(scope.row.unlimited_time)===2\">\n                    <div class=\"selected-time-container\">\n                      <span>{{scope.row.rePlayTime.split('-').map(v => v.slice(0, -3)).join('-')}}</span>\n                      <span class=\"selected-time-tips\">已选日期</span>\n                    </div>\n                    <DatePicker\n                      type=\"date\"\n                      class=\"selected-time-picker\"\n                      size=\"default\"\n                      :editable=\"false\"\n                      :transfer=\"false\"\n                      :clearable=\"false\"\n                      multiple\n                      :confirm=\"false\"\n                      :value=\"scope.row.rePlayDate\"\n                    />\n                  </template>\n                </div>\n              </template>\n            </el-table-column>\n            <el-table-column\n              width=\"185\"\n              label=\"操作\">\n              <template slot-scope=\"scope\">\n                <template v-if=\"scope.row.empty\">\n                  <span @click=\"handleDelete(scope.row)\" class=\"operate-btn\">删除</span>\n                </template>\n                <template v-else>\n                  <span class=\"operate-btn\" @click=\"changeStatus(scope.row)\">\n                  {{Number(scope.row.status)===1?'停播':'复播'}}\n                </span>\n                  <template v-if=\"Number(scope.row.status)===1\">\n                    <Poptip class=\"tip-box\" trigger=\"hover\" width=\"240\" :transfer=\"false\" placement=\"bottom-end\">\n                      <span class=\"operate-btn disable-del\">编辑</span>\n                      <div slot=\"content\">\n                        <ul class=\"tips-container\">\n                          <li>在播文件夹信息不能编辑与删除</li>\n                          <li>若需要编辑或删除，请先停播文件夹</li>\n                        </ul>\n                      </div>\n                    </Poptip>\n                    <Poptip class=\"tip-box\" trigger=\"hover\" width=\"240\" :transfer=\"false\" placement=\"bottom-end\">\n                      <span class=\"operate-btn disable-del\">删除</span>\n                      <div slot=\"content\">\n                        <ul class=\"tips-container\">\n                          <li>在播文件夹信息不能编辑与删除</li>\n                          <li>若需要编辑或删除，请先停播文件夹</li>\n                        </ul>\n                      </div>\n                    </Poptip>\n                  </template>\n                  <template v-else>\n                    <router-link tag=\"span\" :to=\"$route.params.type+'/detail/'+scope.row.folderId\"\n                                 class=\"operate-btn\">编辑\n                    </router-link>\n                    <span @click=\"handleDelete(scope.row)\" class=\"operate-btn\">删除</span>\n                  </template>\n                </template>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n        <div class=\"screen-body-footer\">\n          <Page\n            :total=\"Number(listData.total)\"\n            :current=\"Number(listData.pageNum)+1\"\n            :page-size=\"Number(listData.pageSize)\"\n            show-sizer show-elevator show-total :transfer=\"false\"\n            @on-change=\"pageNumChange\"\n            @on-page-size-change=\"pageSizeChange\"\n          />\n        </div>\n      </template>\n    </div>\n    <Modal\n      v-if=\"isConfirming\"\n      modalTitle=\"删除\"\n      @cancelModal=\"isConfirming=false\"\n      @confirmModal=\"handleConfirm\"\n    >确认删除吗\n    </Modal>\n    <Modal\n      type=\"warning\"\n      :hiddenCancelBtn=\"true\"\n      v-if=\"isWarning\"\n      modalTitle=\"存储空间不足\"\n      confirmText=\"立即处理\"\n      @confirmModal=\"isWarning=false\"\n      :clickShadowButNotCancel=\"true\"\n    >\n      <i class=\"modal-error-icon\"></i>\n      <span>系统空间不足！请清除过期文件夹，否则系统将自动清除！</span>\n    </Modal>\n  </div>\n</template>\n<script>\nimport { mapMutations } from 'vuex'\nimport { getFolderList, stopPlayFolder, deleteFolder, cancelStatus } from 'api/screen'\nimport { getToken } from 'utils/tool'\nimport Utils from 'utils/utils'\nimport Modal from 'components/Modal'\n\nexport default {\n  components: {Modal},\n  data () {\n    return {\n      isWarning: false,\n      isConfirming: false,\n      isLoading: false,\n      isEmpty: false,\n      isNoPower: false,\n      canSpread: false,\n      isSpread: false,\n      idNeedSpread: [],\n      listData: {},\n      spreadFolder: []\n    }\n  },\n  computed: {\n    tableData: function () {\n      if (!Array.isArray(this.listData.data)) {\n        return\n      }\n      let deletedMachines = {}\n      this.listData.machineCount.forEach((v) => {\n        if (!deletedMachines[v.folder_id]) {\n          deletedMachines[v.folder_id] = []\n        }\n        deletedMachines[v.folder_id].push(v)\n      })\n      let storesArray = []\n      this.listData.data.forEach((value) => {\n        let storesObject = {}\n        let storesName = value.stores_name.split(',')\n        let storesIds = value.stores_id.split(',')\n        let machinesName = value.machine_name_all.split(',')\n        let machineIds = value.machine_id_all.split(',')\n        // 剔除有问题的终端机\n        let checkedMachineIds = value.machine_ids.split(',')\n        let checkedMachineName = value.machine_name.split(',')\n        let checkedMachines = checkedMachineIds.map((v, i) => {\n          return {\n            id: v,\n            name: checkedMachineName[i]\n          }\n        })\n        if (deletedMachines[value.id]) {\n          deletedMachines[value.id].forEach((v) => {\n            let index = checkedMachines.map(v => v.id).indexOf(v.machine_id)\n            if (index !== -1) {\n              checkedMachines.splice(index, 1)\n            }\n          })\n        }\n        let firstStore\n        let storeLength = 0\n        storesIds.forEach((v, i) => {\n          // 没有选中的话，剔除门店\n          if (checkedMachines.map(v => v.name ? v.name.split('-')[0] : '').indexOf(storesName[i]) === -1) {\n            return\n          }\n          storeLength++\n          firstStore = firstStore || v\n          let store = {\n            storeName: storesName[i],\n            storeId: v,\n            folderId: value.id,\n            folderName: value.folderName,\n            unlimited_time: value.unlimited_time,\n            status: value.status,\n            startTime: value.startTime,\n            endTime: value.endTime,\n            rePlayDate: value.rePlayDate,\n            rePlayTime: value.rePlayTime,\n            table_index: value.index,\n            machines: [],\n            checked_machine_ids: checkedMachines.map(v => v.id).join(','),\n            index: storeLength - 1\n          }\n          storesObject[v] = store\n          storesArray.push(store)\n        })\n        if (firstStore) {\n          storesObject[firstStore]['spanSign'] = storeLength > 3 ? storeLength + 1 : storeLength\n          if (storeLength > 3) {\n            storesArray.push({\n              machines: [],\n              more: true,\n              folderId: value.id,\n              index: -1\n            })\n          }\n          machinesName.forEach((v, i) => {\n            let storeName = v.split('-')[0]\n            let storeId = storesIds[storesName.indexOf(storeName)]\n            if (!storesObject[storeId]) {\n              return\n            }\n            storesObject[storeId]['machines'].push({\n              machineName: v,\n              machineId: machineIds[i],\n              storeName,\n              storeId\n            })\n          })\n        } else {\n          // 全都被剔除了\n          storesArray.push({\n            machines: [],\n            spanSign: 1,\n            empty: true,\n            folderId: value.id,\n            folderName: value.folderName,\n            unlimited_time: value.unlimited_time,\n            status: value.status,\n            startTime: value.startTime,\n            endTime: value.endTime,\n            table_index: value.index,\n            index: 1\n          })\n        }\n      })\n      return storesArray\n    },\n    type: function () {\n      switch (this.$route.params.type) {\n        case 'top':\n          return 0\n        case 'middle':\n          return 1\n        case 'bottom':\n          return 2\n      }\n    },\n    content_type: function () {\n      switch (this.$route.query.classify) {\n        case 'picture':\n          return 0\n        case 'video':\n          return 1\n      }\n    }\n  },\n  watch: {\n    '$route': function () {\n      this.getList(Object.assign({}, this.$route.query))\n    }\n  },\n  beforeCreate () {\n    let {classify, pageNum, pageSize} = this.$route.query\n    if ((classify !== 'picture') && (classify !== 'video') && Object.is(pageNum, undefined) && Object.is(pageSize, undefined)) {\n      this.$router.replace({\n        path: this.$route.path,\n        query: {\n          classify: 'picture',\n          pageNum: 0,\n          pageSize: 10\n        }\n      })\n    }\n  },\n  mounted () {\n    this.token = getToken()\n    this.getList(Object.assign({}, this.$route.query))\n    window.onresize = Utils.throttle(() => {\n      this.checkSpread()\n    }, 1000)\n    let firstCheck = setInterval(() => {\n      if (this.checkSpread() !== false) {\n        clearInterval(firstCheck)\n      }\n    }, 500)\n    // 去除菜单status\n    if (this.$store.state.userMenuStatus && this.$store.state.userMenuStatus['screen']) {\n      cancelStatus({user_id: this.token.id})\n      this.setUserMenuStatus(Object.assign({}, this.$store.state.userMenuStatus, {screen: false}))\n    }\n  },\n  destroyed () {\n    window.onresize = null\n  },\n  methods: {\n    ...mapMutations({\n      setUserMenuStatus: 'SET_USER_MENU_STATUS'\n    }),\n    handleName (name) {\n      if (name.length > 13) {\n        return name.substr(0, 13) + '...'\n      } else {\n        return name\n      }\n    },\n    handleDelete (folder) {\n      if (folder.empty) {\n        this.folderEmpty = 1\n        this.isConfirming = folder.folderId\n      } else if (Number(folder.status) !== 1) {\n        this.isConfirming = folder.folderId\n      }\n    },\n    handleConfirm () {\n      deleteFolder({\n        empty: this.folderEmpty,\n        user_id: this.token.id,\n        id: this.isConfirming,\n        type: this.type\n      }).then(res => {\n        if (Number(res.code) === 200) {\n          this.$message({\n            message: '删除成功',\n            type: 'success'\n          })\n          this.isConfirming = false\n          this.getList(Object.assign({}, this.$route.query))\n        } else {\n          this.$message({\n            message: res.message,\n            type: 'warning'\n          })\n        }\n      })\n    },\n    changeStatus (folder) {\n      if (Number(folder.status) === 1) {\n        let data = {\n          id: folder.folderId,\n          user_id: this.token.id,\n          type: this.type,\n          status: String(folder.status) === '0' ? '1' : '0'\n        }\n        stopPlayFolder(data).then(res => {\n          if (Number(res.code) === 200) {\n            this.$message({\n              message: `修改成功，已${String(folder.status) === '0' ? '播放' : '停播'}文件夹`,\n              type: 'success'\n            })\n            this.getList(Object.assign({}, this.$route.query))\n          } else {\n            this.$message({\n              message: res.message,\n              type: 'warning'\n            })\n          }\n        })\n      } else {\n        this.$router.push({\n          path: this.$route.params.type + '/detail/' + folder.folderId,\n          query: {\n            type: 'replay'\n          }\n        })\n      }\n    },\n    headerClick (column) {\n      if (column.property === 'machines') {\n        if (this.canSpread) {\n          this.isSpread = !this.isSpread\n        }\n      }\n    },\n    cellClick (row) {\n      if (row.more) {\n        let folderId = row.folderId\n        let index = this.spreadFolder.indexOf(folderId)\n        if (index === -1) {\n          this.spreadFolder.push(folderId)\n        } else {\n          this.spreadFolder.splice(index, 1)\n        }\n      }\n    },\n    checkSpread () {\n      if (this.isSpread) {\n        return\n      }\n      let keys = Object.keys(this.$refs).filter(v => v.split('-')[0] === 'ul' && this.$refs[v])\n      let uls = keys.map(v => this.$refs[v])\n      if (uls.length === 0) {\n        return false\n      }\n      let needSpread = uls.map(v => v.offsetHeight).some(v => v !== 40)\n      if (needSpread) {\n        this.canSpread = uls.map(v => {\n          return Array.prototype.slice.call(v.childNodes).reduce((x, y) => x + y.offsetWidth + 40, 0)\n        }).reduce((x, y) => x > y ? x : y)\n        let ids = keys.map(v => v.split('-')[1])\n        let idNeedSpread = []\n        uls.forEach((v, i) => {\n          if (v.offsetHeight !== 40) {\n            idNeedSpread.push(ids[i])\n          }\n        })\n        this.idNeedSpread = idNeedSpread\n      } else {\n        this.canSpread = false\n      }\n    },\n    arraySpanMethod ({row, column, rowIndex, columnIndex}) {\n      if ((columnIndex !== 2) && (columnIndex !== 3)) {\n        if (row.spanSign) {\n          let rowspan = row.spanSign\n          return {\n            rowspan: rowspan,\n            colspan: 1\n          }\n        } else {\n          return {\n            rowspan: 0,\n            colspan: 0\n          }\n        }\n      } else {\n        if (row.more) {\n          return {\n            rowspan: columnIndex === 2 ? 1 : 0,\n            colspan: columnIndex === 2 ? 2 : 0\n          }\n        } else {\n          if ((this.spreadFolder.indexOf(row.folderId) === -1) && (row.index > 2)) {\n            return {\n              rowspan: 0,\n              colspan: 0\n            }\n          }\n        }\n      }\n    },\n    easyQuery (data = {}) {\n      let prevQuery = this.$route.query\n      let query = Object.assign({}, prevQuery, data)\n      this.$router.push({path: this.$route.path, query})\n    },\n    handleClassify (classify) {\n      this.easyQuery({\n        pageNum: 0,\n        classify\n      })\n    },\n    getList (data = {}) {\n      this.isLoading = true\n      data['user_id'] = this.token.id\n      data['type'] = this.type\n      data['content_type'] = this.content_type\n      delete data['classify']\n      data['pageNum'] = data['pageNum'] || 0\n      data['pageSize'] = data['pageSize'] || 10\n      this.listData.data = null\n      getFolderList(data).then((res) => {\n        if (Number(res.code) === 200) {\n          this.isEmpty = false\n          this.listData = this.countIndex(res)\n        } else if (Number(res.code) === 201) {\n          this.isEmpty = true\n        } else if (Number(res.code) === 202) {\n          this.isNoPower = true\n        } else {\n          this.$message({\n            message: res.message,\n            type: 'warning'\n          })\n        }\n        this.isLoading = false\n      })\n    },\n    countIndex (res) {\n      let {pageSize, pageNum, data} = res\n      data.forEach((v, i) => {\n        v.index = (pageSize * pageNum) + i + 1\n      })\n      return res\n    },\n    pageNumChange (pageNum) {\n      this.easyQuery({\n        pageNum: String(pageNum - 1)\n      })\n    },\n    pageSizeChange (pageSize) {\n      this.easyQuery({\n        pageNum: String(0),\n        pageSize: pageSize\n      })\n    }\n  }\n}\n</script>\n<style lang='stylus' scoped>\n  .screen-container\n    height 100%\n    display flex\n    flex-direction column\n    position: relative\n  .screen-btn-group\n    display flex\n    justify-content flex-start\n    align-items center\n    position absolute\n    bottom 100%\n    left 0\n    padding-left 30px\n  .screen-btn\n    height 32px\n    line-height 32px\n    font-size 14px\n    width 120px\n    cursor pointer\n    border-radius: 4px 4px 0px 0px;\n    border none\n    background: rgba(234, 234, 234, 0.9);\n    color #999999\n    outline none\n    &.screen-primary\n      color #FFFFFF\n      background: rgba(33, 98, 210, 0.9);\n      box-shadow: 0px 0px 2px 0px rgba(33, 98, 210, 1);\n  .screen-body\n    flex 1\n    display: flex\n    flex-direction column\n  .btn-group-left\n    padding-left 20px\n    margin-bottom -20px\n    display flex\n    align-items center\n  .btn-group\n    height 72px\n    display flex\n    justify-content space-between\n    align-items center\n    padding-right 30px\n    .operation-tips\n      font-size 13px\n      color #B1B1B1\n  .help-icon\n    display inline-block\n    margin-right 5px\n    height 72px\n    width 22px\n    background url('~@/assets/help.png') no-repeat center\n    background-size 22px 22px\n  .add-btn\n    border none\n    width: 120px;\n    height: 32px;\n    background: rgba(57, 211, 111, 1);\n    box-shadow: 0px 0px 2px 0px rgba(57, 211, 111, 1);\n    border-radius: 4px;\n    font-size: 14px;\n    color: rgba(255, 255, 255, 1);\n  .screen-empty\n    flex 1\n    display flex\n    justify-content center\n    align-items center\n    flex-direction column\n  .empty-title\n    font-size 12px\n    color #b1b1b1\n    margin-top 10px\n    > a\n      color #24CF5F\n  .screen-body-container\n    flex 1\n    width 100%\n    overflow auto\n  .screen-body-footer\n    padding-right 20px\n    height 60px\n    width 100%\n    display: flex\n    justify-content flex-end\n    align-items center\n  .checkbox-list\n    height 40px\n    position: relative\n    padding-left 10px\n    &.checkbox-readonly:before\n      content: ''\n      position: absolute\n      top 0\n      left 0\n      z-index 5\n      width 100%\n      height 100%\n      background white\n      opacity 0\n    &.need-spread:after\n      content: '......'\n      position: absolute\n      top 0\n      right 10px\n      bottom 6px\n      margin auto 0\n      height 12px\n      line-height 12px\n  .checkbox-ul\n    display flex\n    flex-wrap wrap\n  .checkbox-ul li\n    margin-right 30px\n    height 40px\n    display flex\n    align-items center\n  .operate-btn\n    margin: 0 10px\n    cursor pointer\n    color #2162d2\n    &.disable-del\n      color #d4d4d4\n      cursor not-allowed\n  .screen-body-container.can-spread /deep/ .spread-btn\n    cursor pointer\n    & > .cell:after\n      content '展开>>'\n      color #2162D2\n      font-size 12px\n      font-weight normal\n      margin-left 14px\n  .screen-body-container.can-spread.is-spread /deep/ .spread-btn > .cell:after\n    content '收起'\n  .folder-link\n    border-bottom 1px solid #2162D2\n    color #2162D2\n    cursor pointer\n  .playing-icon\n    display inline-block\n    height 24px\n    width 16px\n    background url('~@/assets/playing.png') no-repeat center\n    background-size 100% 100%\n    position absolute\n    top -2px\n    left 0\n  .tip-box /deep/ .ivu-poptip-inner\n    background rgba(0, 0, 0, 0.6);\n    box-shadow 0px 0px 6px 0px rgba(102, 102, 102, 0.2);\n  .tip-box /deep/ .ivu-poptip-popper[x-placement^=bottom] .ivu-poptip-arrow:after\n    border-bottom-color: rgba(0, 0, 0, 0.6);\n    top 0\n  .tips-container\n    text-align left\n    color white\n    line-height 24px\n    & > li:before\n      content ''\n      display inline-block\n      width 6px\n      height 6px\n      background white\n      border-radius 50%\n      margin-right 8px\n      position relative\n      top -1px\n  .modal-error-icon\n    display inline-block\n    height 23px\n    width 23px\n    background url('~@/assets/error.png') no-repeat center\n    background-size 100% 100%\n    position relative\n    top 5px\n    margin-right 5px\n  .list-container /deep/ .el-table__body tr.hover-row > td\n    background-color #fff\n  .list-container /deep/ .el-table--enable-row-hover .el-table__body tr:hover > td\n    background-color #fff\n  .selected-time-container\n    display: inline-block\n    position: relative\n    margin-right 14px\n  .selected-time-tips\n    position absolute\n    top 0\n    right -70px\n    bottom 0\n    margin auto 0\n    cursor pointer\n    color: #2162d2;\n  .selected-time-picker\n    width 60px\n  .selected-time-picker /deep/ .ivu-date-picker-rel\n    opacity 0\n    cursor pointer\n  .selected-time-picker /deep/ .ivu-picker-confirm\n    display none\n  .selected-time-picker /deep/ .ivu-picker-panel-content\n    position relative\n  .selected-time-picker /deep/ .ivu-picker-panel-content:before\n    content ''\n    position absolute\n    top 0\n    left 0\n    z-index 10\n    width 100%\n    height 100%\n    background white\n    opacity 0\n  .selected-time-picker /deep/ .ivu-date-picker-cells-cell-selected em\n    background #b1b1b1\n  .selected-time-picker /deep/ .ivu-date-picker-cells-cell-selected:hover em\n    background #b1b1b1\n  .selected-time-picker /deep/ .ivu-date-picker-cells-focused em\n    box-shadow none\n  .selected-time-picker /deep/ .ivu-date-picker-cells-cell-today em:after\n    display none\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/user/screen/List.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"screen-container\"},[_c('div',{staticClass:\"screen-btn-group\"},[_c('button',{staticClass:\"screen-btn\",class:{'screen-primary':_vm.content_type===0},on:{\"click\":function($event){_vm.handleClassify('picture')}}},[_vm._v(\"\\n      图片\\n    \")]),_vm._v(\" \"),(_vm.$route.params.type!=='bottom')?_c('button',{staticClass:\"screen-btn\",class:{'screen-primary':_vm.content_type===1},on:{\"click\":function($event){_vm.handleClassify('video')}}},[_vm._v(\"\\n      视频\\n    \")]):_vm._e()]),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}],staticClass:\"screen-body\"},[(!_vm.isNoPower)?_c('div',{staticClass:\"btn-group\"},[_vm._m(0),_vm._v(\" \"),_c('router-link',{staticClass:\"add-btn\",attrs:{\"tag\":\"button\",\"to\":{ path: _vm.$route.params.type+'/detail', query: { classify: this.$route.query.classify }}}},[_vm._v(\"\\n        创建文件夹\\n      \")])],1):_vm._e(),_vm._v(\" \"),(_vm.isEmpty)?_c('div',{staticClass:\"screen-empty\"},[_c('img',{attrs:{\"src\":require(\"@/assets/empty_logo.gif\"),\"alt\":\"empty_logo\"}}),_vm._v(\" \"),_c('p',{staticClass:\"empty-title\"},[_vm._v(\"还没有文件，请先\\n        \"),_c('router-link',{attrs:{\"to\":{ path: _vm.$route.params.type+'/detail', query: { classify: this.$route.query.classify }}}},[_vm._v(\"\\n          创建文件夹\\n        \")])],1)]):(_vm.isNoPower)?_c('div',{staticClass:\"screen-empty\"},[_c('img',{attrs:{\"src\":require(\"@/assets/empty_logo.gif\"),\"alt\":\"empty_logo\"}}),_vm._v(\" \"),_c('p',{staticClass:\"empty-title\"},[_vm._v(\"没有模块权限，请与管理员确认\")])]):[_c('div',{staticClass:\"screen-body-container list-container\",class:{'can-spread':_vm.canSpread,'is-spread':_vm.isSpread}},[_c('el-table',{staticStyle:{\"text-align\":\"center\",\"color\":\"#666666\"},attrs:{\"header-cell-style\":{'text-align': 'center'},\"height\":\"100%\",\"data\":_vm.tableData,\"span-method\":_vm.arraySpanMethod,\"border\":\"\",\"header-cell-class-name\":function (ref){\n\tvar columnIndex = ref.columnIndex;\n\n\treturn columnIndex===3&&'spread-btn';\n}},on:{\"header-click\":_vm.headerClick,\"cell-click\":_vm.cellClick}},[_c('el-table-column',{attrs:{\"prop\":\"table_index\",\"width\":\"68\",\"label\":\"序号\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.table_index))]),_vm._v(\" \"),(Number(scope.row.status)===1)?_c('i',{staticClass:\"playing-icon\"}):_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"folderName\",\"width\":\"120\",\"label\":\"文件夹\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.empty)?[_c('span',{staticStyle:{\"color\":\"rgb(177, 177, 177)\"}},[_vm._v(_vm._s(_vm.handleName(scope.row.folderName)))])]:[_c('router-link',{staticClass:\"folder-link\",attrs:{\"tag\":\"span\",\"title\":scope.row.folderName,\"to\":'folder/'+scope.row.folderId}},[_vm._v(_vm._s(_vm.handleName(scope.row.folderName))+\"\\n                \")])]]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"158\",\"prop\":\"storeName\",\"label\":\"门店\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.empty)?[_c('span',{staticStyle:{\"color\":\"#B1B1B1\"}},[_vm._v(\"-/-\")])]:_vm._e(),_vm._v(\" \"),(scope.row.more)?[_c('div',{staticStyle:{\"color\":\"#217EE6\",\"cursor\":\"pointer\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.spreadFolder.indexOf(scope.row.folderId)===-1?'更多':'收起')+\"\\n                \")])]:[_vm._v(_vm._s(scope.row.storeName))]]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":_vm.canSpread&&_vm.isSpread?_vm.canSpread:400,\"prop\":\"machines\",\"label\":\"选择终端机\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.empty)?_c('div',[_c('span',{staticStyle:{\"color\":\"#B1B1B1\"}},[_vm._v(\"终端机的本地文件被删除，文件夹失效\")])]):(scope.row.machines.length===0)?_c('div',[_c('span',{staticStyle:{\"color\":\"#B1B1B1\"}},[_vm._v(\"请选择终端机\")])]):_c('div',{staticClass:\"checkbox-list checkbox-readonly\",class:{'need-spread':_vm.canSpread&&!_vm.isSpread&&_vm.idNeedSpread.indexOf(scope.row.folderId+'+'+scope.row.storeId)!==-1}},[_c('ul',{ref:'ul-'+scope.row.folderId+'+'+scope.row.storeId,staticClass:\"checkbox-ul\"},_vm._l((scope.row.machines),function(item,index){return _c('li',{key:index},[_c('el-checkbox',{attrs:{\"disabled\":\"\",\"checked\":scope.row.checked_machine_ids.indexOf(item.machineId)!==-1}},[_vm._v(\"\\n                      \"+_vm._s(item.machineName)+\"\\n                    \")])],1)}))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"314px\",\"label\":\"播放时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticStyle:{\"font-size\":\"12px\"}},[(Number(scope.row.unlimited_time)===0)?[_vm._v(\"\\n                  不限时间\\n                \")]:(Number(scope.row.unlimited_time)===1)?[_c('span',[_vm._v(_vm._s(scope.row.startTime))]),_vm._v(\" \"),_c('span',{staticStyle:{\"margin\":\"0 14px\"}},[_vm._v(\"至\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(scope.row.endTime))])]:(Number(scope.row.unlimited_time)===2)?[_c('div',{staticClass:\"selected-time-container\"},[_c('span',[_vm._v(_vm._s(scope.row.rePlayTime.split('-').map(function (v) { return v.slice(0, -3); }).join('-')))]),_vm._v(\" \"),_c('span',{staticClass:\"selected-time-tips\"},[_vm._v(\"已选日期\")])]),_vm._v(\" \"),_c('DatePicker',{staticClass:\"selected-time-picker\",attrs:{\"type\":\"date\",\"size\":\"default\",\"editable\":false,\"transfer\":false,\"clearable\":false,\"multiple\":\"\",\"confirm\":false,\"value\":scope.row.rePlayDate}})]:_vm._e()],2)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"185\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.empty)?[_c('span',{staticClass:\"operate-btn\",on:{\"click\":function($event){_vm.handleDelete(scope.row)}}},[_vm._v(\"删除\")])]:[_c('span',{staticClass:\"operate-btn\",on:{\"click\":function($event){_vm.changeStatus(scope.row)}}},[_vm._v(\"\\n                \"+_vm._s(Number(scope.row.status)===1?'停播':'复播')+\"\\n              \")]),_vm._v(\" \"),(Number(scope.row.status)===1)?[_c('Poptip',{staticClass:\"tip-box\",attrs:{\"trigger\":\"hover\",\"width\":\"240\",\"transfer\":false,\"placement\":\"bottom-end\"}},[_c('span',{staticClass:\"operate-btn disable-del\"},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('ul',{staticClass:\"tips-container\"},[_c('li',[_vm._v(\"在播文件夹信息不能编辑与删除\")]),_vm._v(\" \"),_c('li',[_vm._v(\"若需要编辑或删除，请先停播文件夹\")])])])]),_vm._v(\" \"),_c('Poptip',{staticClass:\"tip-box\",attrs:{\"trigger\":\"hover\",\"width\":\"240\",\"transfer\":false,\"placement\":\"bottom-end\"}},[_c('span',{staticClass:\"operate-btn disable-del\"},[_vm._v(\"删除\")]),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('ul',{staticClass:\"tips-container\"},[_c('li',[_vm._v(\"在播文件夹信息不能编辑与删除\")]),_vm._v(\" \"),_c('li',[_vm._v(\"若需要编辑或删除，请先停播文件夹\")])])])])]:[_c('router-link',{staticClass:\"operate-btn\",attrs:{\"tag\":\"span\",\"to\":_vm.$route.params.type+'/detail/'+scope.row.folderId}},[_vm._v(\"编辑\\n                  \")]),_vm._v(\" \"),_c('span',{staticClass:\"operate-btn\",on:{\"click\":function($event){_vm.handleDelete(scope.row)}}},[_vm._v(\"删除\")])]]]}}])})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"screen-body-footer\"},[_c('Page',{attrs:{\"total\":Number(_vm.listData.total),\"current\":Number(_vm.listData.pageNum)+1,\"page-size\":Number(_vm.listData.pageSize),\"show-sizer\":\"\",\"show-elevator\":\"\",\"show-total\":\"\",\"transfer\":false},on:{\"on-change\":_vm.pageNumChange,\"on-page-size-change\":_vm.pageSizeChange}})],1)]],2),_vm._v(\" \"),(_vm.isConfirming)?_c('Modal',{attrs:{\"modalTitle\":\"删除\"},on:{\"cancelModal\":function($event){_vm.isConfirming=false},\"confirmModal\":_vm.handleConfirm}},[_vm._v(\"确认删除吗\\n  \")]):_vm._e(),_vm._v(\" \"),(_vm.isWarning)?_c('Modal',{attrs:{\"type\":\"warning\",\"hiddenCancelBtn\":true,\"modalTitle\":\"存储空间不足\",\"confirmText\":\"立即处理\",\"clickShadowButNotCancel\":true},on:{\"confirmModal\":function($event){_vm.isWarning=false}}},[_c('i',{staticClass:\"modal-error-icon\"}),_vm._v(\" \"),_c('span',[_vm._v(\"系统空间不足！请清除过期文件夹，否则系统将自动清除！\")])]):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"btn-group-left\"},[_c('span',{staticClass:\"help-icon\"}),_vm._v(\" \"),_c('span',{staticClass:\"operation-tips\"},[_vm._v(\"点击文件夹名称，可上传文件\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-73c4e68b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/user/screen/List.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-73c4e68b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./List.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./List.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./List.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-73c4e68b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./List.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-73c4e68b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/screen/List.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}