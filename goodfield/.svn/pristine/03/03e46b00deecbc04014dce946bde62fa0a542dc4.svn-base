{"version":3,"sources":["webpack:///src/views/user/setting/Terminal.vue","webpack:///./src/views/user/setting/Terminal.vue?2c72","webpack:///./src/views/user/setting/Terminal.vue"],"names":["Terminal","components","Modal","Toast","GPagination","Pagination","data","_$route$query","this","$route","query","status","keyword","listData","loading","machineTotalLabel","paganition","toastStatus","toastData","statusOptions","label","watch","_$route$query2","pageNum","pageSize","undefined","easyQuery","getListData","beforeCreate","_$route$query3","Object","is","$router","replace","path","mounted","getMemorys","methods","_this","terminal","then","res","memory","catch","handleMemory","machineId","len","length","i","machine_id","arr","split","top","cenBottom","arguments","prevQuery","assign","push","changeCurrentPage","_ref","changeCurrentSize","_ref2","refreshData","inputContent","utils_default","a","throttle","leading","_this2","form","account","tool","code","handleListData1","parseInt","currentPage","total","setToastData","message","type","newListData","num","listItem","machinesIdArr","machinesStatusArr","machinesNameArr","machine_name","machinesIdArrLenght","flag","_$route$query4","newListItem","index","userId","id","cityName","stores_city","storeId","stores_id","storeName","stores_name","freeStorage","frequency","machineName","machineStatus","span1","Number","tempListData","cityNameArr","forEach","item","cityIndex","indexOf","cityNameArrLength","finalListData","_loop","key","tempListDataItemLength","span","concat","_toConsumableArray","_ref3","_this3","callback","$set","setTimeout","objectSpanMethod1","_ref4","row","columnIndex","column","rowIndex","rowspan","colspan","setting_Terminal","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","placeholder","model","value","$$v","expression","_l","_v","staticStyle","width","prefix-icon","nativeOn","input","$event","_m","directives","name","rawName","span-method","border","prop","align","scopedSlots","_u","fn","scope","class","outline","red","_s","page-size","current-page","on","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/20.d688324d1e25940c6a32.js","sourcesContent":["<template>\n  <div class=\"list list-special\">\n    <div class=\"list-header frsbc\">\n      <div class='list-header-left'>\n        <div class=\"list-header-select-container\">\n          <el-select v-model=\"status\" placeholder=\"状态\">\n            <el-option\n              v-for=\"(item, index) in statusOptions\"\n              :key=\"index\"\n              :label=\"item.label\"\n              :value=\"item.status\">\n            </el-option>\n          </el-select>\n        </div>\n        <div class=\"list-header-input-container\">\n          <el-input\n            @input.native='inputContent'\n            style='width: 350px'\n            v-model='keyword'\n            placeholder=\"可搜索门店名\"\n            prefix-icon=\"el-icon-search\">\n          </el-input>\n        </div>\n      </div>\n      <div class=\"list-header-right\">\n        <div>\n          <span class='online-icon'></span>\n          在线\n        </div>\n        <div>\n          <span class='outline-icon'></span>\n          离线\n        </div>\n      </div>\n    </div>\n    <div class=\"terminal-table-container\">\n      <el-table\n        v-loading=\"loading\"\n        :data=\"listData\"\n        :span-method=\"objectSpanMethod1\"\n        border\n        style=\"width: 100%;\">\n        <el-table-column\n          prop=\"index\"\n          label=\"序号\"\n          align='center'\n          width=\"60\">\n        </el-table-column>\n        <el-table-column\n          prop=\"cityName\"\n          align='center'\n          label=\"地区\">\n        </el-table-column>\n        <el-table-column\n          prop=\"storeName\"\n          align='center'\n          label=\"门店\">\n        </el-table-column>\n        <el-table-column\n          prop=\"machineName\"\n          align='center'\n          label=\"终端机\">\n        </el-table-column>\n        <el-table-column\n          prop=\"machineStatus\"\n          align='center'\n          label=\"状态\">\n          <template slot-scope='scope'>\n            <span class=\"status-radius online\" :class=\"{outline: !scope.row.machineStatus}\"></span>\n          </template>\n        </el-table-column>\n        <el-table-column\n            prop=\"freeStorage\"\n            align='center'\n            label=\"内存余量（GB）\">\n            <template slot-scope='scope'>\n              <span>\n                <span :class='{red: Number(scope.row.freeStorage.top) < 0.48}'>上屏:{{scope.row.freeStorage.top}}；</span>\n                <span :class='{red: Number(scope.row.freeStorage.cenBottom) < 0.48}'>中下屏:{{scope.row.freeStorage.cenBottom}}</span>\n              </span>\n            </template>\n          </el-table-column>\n        <el-table-column\n          prop=\"frequency\"\n          align='center'\n          label=\"数量\">\n        </el-table-column>\n        <el-table-column\n          prop=\"total\"\n          align='center'\n          :label=\"machineTotalLabel\">\n        </el-table-column>\n      </el-table>\n    </div>\n    <g-pagination\n      v-if='listData.length'\n      @changeCurrentPage='changeCurrentPage'\n      @changeCurrentSize='changeCurrentSize'\n      :total='paganition.total'\n      :page-size='paganition.pageSize'\n      :current-page='paganition.currentPage'>\n    </g-pagination>\n    <toast\n      v-if='toastStatus'\n      :message='toastData.message'\n      :type='toastData.type'>\n    </toast>\n  </div>\n</template>\n\n<script>\nimport { getMachineInfo, getMemorys } from 'api/terminal'\nimport { getToken } from 'utils/tool'\nimport Utils from 'utils/utils'\n\nimport Modal from 'components/Modal'\nimport Toast from 'components/Toast'\nimport GPagination from 'components/Pagination'\n\nexport default {\n  components: {Modal, Toast, GPagination},\n  data () {\n    let {status, keyword} = this.$route.query\n    return {\n      // 服务器数据\n      status,\n      keyword,\n      listData: [], // 已分发的数据\n      loading: true, // 是否正在加载数据\n      machineTotalLabel: '总数量',\n      paganition: {},\n      // toast\n      toastStatus: false,\n      toastData: {},\n      // 【列表状态筛选】\n      statusOptions: [{\n        status: '',\n        label: '全部'\n      }, {\n        status: '1',\n        label: '在线'\n      }, {\n        status: '0',\n        label: '离线'\n      }]\n    }\n  },\n  watch: {\n    '$route': function () {\n      let {pageNum, pageSize} = this.$route.query\n      if (pageNum === undefined || pageSize === undefined) {\n        this.easyQuery({\n          pageNum: 0,\n          pageSize: 10,\n          status: '',\n          keyword: ''\n        })\n      } else {\n        this.getListData(this.$route.query)\n      }\n    },\n    'status': function () {\n      this.easyQuery({\n        pageNum: 0,\n        status: this.status\n      })\n    }\n  },\n  beforeCreate () {\n    let {status, keyword, pageSize, pageNum} = this.$route.query\n    if (Object.is(pageSize, undefined) && Object.is(pageNum, undefined) && Object.is(status, undefined) && Object.is(keyword, undefined)) {\n      this.$router.replace({\n        path: this.$route.path,\n        query: {\n          pageNum: 0,\n          pageSize: 10,\n          status: '',\n          keyword: ''\n        }\n      })\n    }\n  },\n  mounted () {\n    this.getMemorys()\n    this.getListData(this.$route.query)\n  },\n  methods: {\n    getMemorys () {\n      getMemorys().then(res => {\n        this.memory = res.data\n      }).catch(() => {\n        this.loading = false\n      })\n    },\n    // 处理终端机剩余内存\n    handleMemory (machineId) {\n      let memory = this.memory\n      let len = memory.length\n      for (let i = 0; i < len; i++) {\n        if (memory[i].machine_id === machineId) {\n          let arr = memory[i].memory.split(',')\n          return {\n            top: arr[0],\n            cenBottom: arr[1]\n          }\n        }\n      }\n    },\n    easyQuery (data = {}) {\n      let prevQuery = this.$route.query\n      let query = Object.assign({}, prevQuery, data)\n      this.$router.push({path: this.$route.path, query})\n    },\n    changeCurrentPage ({pageNum}) {\n      this.easyQuery({\n        pageNum\n      })\n    },\n    changeCurrentSize ({pageSize}) {\n      this.easyQuery({\n        pageNum: '0',\n        pageSize\n      })\n    },\n    refreshData () {\n      this.getMemorys()\n      this.getListData(this.$route.query)\n    },\n    inputContent: Utils.throttle(function () {\n      this.easyQuery({\n        keyword: this.keyword,\n        pageNum: 0\n      })\n    }, 1000, {leading: false}),\n    // 获取列表\n    getListData (data = {}) {\n      this.loading = true\n      let form = Object.assign({account: getToken().account}, data)\n      getMachineInfo(form).then(res => {\n        if (res.code === '200') {\n          this.listData = this.handleListData1(res.data)\n          this.machineTotalLabel = `总数量`\n          this.paganition = {\n            pageSize: parseInt(res.pageSize),\n            currentPage: parseInt(res.pageNum) + 1,\n            total: parseInt(res.total)\n          }\n        } else if (res.code === '201') {\n          this.listData = []\n          this.machineTotalLabel = `总数量`\n        } else {\n          this.listData = []\n          this.machineTotalLabel = `总数量`\n          this.setToastData({\n            message: res.message,\n            type: 'fail'\n          })\n        }\n        this.loading = false\n      }).catch(() => {\n        this.loading = false\n      })\n    },\n    // 处理未分发，列表数据\n    handleListData1 (listData) {\n      let newListData = []\n      for (let num = 0; num < listData.length; num++) {\n        let listItem = listData[num]\n        let machinesIdArr = listItem.machine_id.split(',')\n        let machinesStatusArr = listItem.status.split(',')\n        let machinesNameArr = listItem.machine_name.split(',')\n        let machinesIdArrLenght = machinesIdArr.length\n\n        let flag = true\n        let { pageSize, pageNum } = this.$route.query\n        for (let i = 0; i < machinesIdArrLenght; i++) {\n          let newListItem = {\n            index: (pageSize * pageNum) + num + 1,\n            userId: listItem.id,\n            cityName: listItem.stores_city,\n            storeId: listItem.stores_id,\n            storeName: listItem.stores_name,\n            freeStorage: this.handleMemory(machinesIdArr[i]),\n            frequency: parseInt(listItem.frequency),\n            machineId: machinesIdArr[i],\n            machineName: machinesNameArr[i],\n            machineStatus: parseInt(machinesStatusArr[i])\n          }\n          if (flag) {\n            flag = false\n            newListItem.span1 = Number(listItem.frequency)\n          } else {\n            newListItem.span1 = 0\n          }\n          newListData.push(newListItem)\n        }\n      }\n\n      // 将相同的地址的终端机放在一起\n      let tempListData = {}\n      let cityNameArr = []\n\n      newListData.forEach((item, index) => {\n        let cityIndex = cityNameArr.indexOf(item.cityName) + ''\n\n        // cityNameArr中还没有这个城市\n        if (cityIndex === '-1') {\n          let cityNameArrLength = 0\n\n          cityNameArr.push(item.cityName)\n          cityNameArrLength = cityNameArr.length - 1 + ''\n          tempListData[cityNameArrLength] = []\n          tempListData[cityNameArrLength].push(item)\n        } else {\n          tempListData[cityIndex].push(item)\n        }\n      })\n\n      let finalListData = []\n      for (let key in tempListData) {\n        let tempListDataItemLength = tempListData[key].length\n\n        let flag = true\n        tempListData[key].forEach(item => {\n          if (flag) {\n            flag = false\n            item.span = tempListDataItemLength\n          } else {\n            item.span = 0\n          }\n          item.total = tempListData[key][0].span\n        })\n        finalListData = [...finalListData, ...tempListData[key]]\n      }\n      return finalListData\n    },\n    setToastData ({message, type, callback}) {\n      this.toastStatus = true\n      this.$set(this.toastData, 'message', message)\n      this.$set(this.toastData, 'type', type)\n      setTimeout(() => {\n        this.toastStatus = false\n        callback && callback()\n      }, 1200)\n    },\n    // 控制table的表格合并\n    objectSpanMethod1 ({row, column, rowIndex, columnIndex}) {\n      if (columnIndex < 2 || columnIndex === 7) {\n        if (row.span > 1) {\n          return {\n            rowspan: row.span,\n            colspan: 1\n          }\n        } else if (row.span === 0) {\n          return {\n            rowspan: 0,\n            colspan: 0\n          }\n        } else {\n          return {\n            rowspan: 1,\n            colspan: 1\n          }\n        }\n      } else if (columnIndex === 2 || columnIndex === 6) {\n        if (row.span1 > 1) {\n          return {\n            rowspan: row.span1,\n            colspan: 1\n          }\n        } else if (row.span1 === 0) {\n          return {\n            rowspan: 0,\n            colspan: 0\n          }\n        } else {\n          return {\n            rowspan: 1,\n            colspan: 1\n          }\n        }\n      } else {\n        return {\n          rowspan: 1,\n          colspan: 1\n        }\n      }\n    }\n  }\n}\n</script>\n<style lang=\"stylus\">\n  .terminal-table-container .el-table--enable-row-hover .el-table__body tr:hover>td\n    background-color #fff\n</style>\n<style lang=\"stylus\" scoped>\n  .red\n    color #F1524A\n  .list-header-select-container\n    margin-right 20px\n\n  .list-header\n    display flex\n    justify-content space-between\n    align-items center\n    padding 16px 40px 16px 20px\n    .list-header-left\n      display flex\n    .list-header-right\n      display flex\n      align-items center\n      font-size 12px\n      color #999999\n      .online-icon\n        margin-right 5px\n        display inline-block\n        height 7px\n        width 7px\n        border-radius 50%\n        background-color #3ED572\n      .outline-icon\n        margin-right 5px\n        margin-left 30px\n        display inline-block\n        height 7px\n        width 7px\n        border-radius 50%\n        background-color #F1524A\n\n  .list-title\n    font-size 18px\n\n  .add-container\n    display flex\n    align-items center\n\n  .add-icon\n    display inline-block\n    height 38px\n    width 38px\n    background url('~@/assets/set_up.png') no-repeat center\n    background-size contain\n    cursor pointer\n\n  .add-text\n    margin-left 10px\n    font-size 14px\n    color #666666\n    cursor pointer\n\n  #list-table\n    margin-top 0\n\n  .select-auth-td\n    color #a8a8a8\n\n  .el-checkbox-container\n    display inline-block\n    width 130px\n    text-align center\n\n  .select-auth-td-content\n    overflow hidden\n    white-space nowrap\n    text-overflow ellipsis\n    text-align center\n    color #666666\n\n  .terminal-item\n    padding 0 20px\n\n  .store-name\n    margin 0 20px 0 10px\n    display inline-block\n    width 60px\n\n  .more-store\n    margin-top 20px\n    color #217EE6\n    cursor pointer\n\n  .operation-text-button\n    cursor pointer\n    &:hover\n      color #217EE6\n\n  .operation-text-button:first-child\n    margin-right 30px\n\n  .status-radius\n    display inline-block\n    height 14px\n    width 14px\n    border-radius 50%\n    &.online\n      background-color #3ED572\n    &.outline\n      background-color #F1524A\n\n  online outline\n    // 编辑权限\n  .edit-auth\n    position absolute\n    top 0\n    width 100%\n    background-color #ffffff\n    z-index 1\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/user/setting/Terminal.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"list list-special\"},[_c('div',{staticClass:\"list-header frsbc\"},[_c('div',{staticClass:\"list-header-left\"},[_c('div',{staticClass:\"list-header-select-container\"},[_c('el-select',{attrs:{\"placeholder\":\"状态\"},model:{value:(_vm.status),callback:function ($$v) {_vm.status=$$v},expression:\"status\"}},_vm._l((_vm.statusOptions),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.label,\"value\":item.status}})}))],1),_vm._v(\" \"),_c('div',{staticClass:\"list-header-input-container\"},[_c('el-input',{staticStyle:{\"width\":\"350px\"},attrs:{\"placeholder\":\"可搜索门店名\",\"prefix-icon\":\"el-icon-search\"},nativeOn:{\"input\":function($event){return _vm.inputContent($event)}},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}})],1)]),_vm._v(\" \"),_vm._m(0)]),_vm._v(\" \"),_c('div',{staticClass:\"terminal-table-container\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.listData,\"span-method\":_vm.objectSpanMethod1,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"index\",\"label\":\"序号\",\"align\":\"center\",\"width\":\"60\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"cityName\",\"align\":\"center\",\"label\":\"地区\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"storeName\",\"align\":\"center\",\"label\":\"门店\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"machineName\",\"align\":\"center\",\"label\":\"终端机\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"machineStatus\",\"align\":\"center\",\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"status-radius online\",class:{outline: !scope.row.machineStatus}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"freeStorage\",\"align\":\"center\",\"label\":\"内存余量（GB）\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_c('span',{class:{red: Number(scope.row.freeStorage.top) < 0.48}},[_vm._v(\"上屏:\"+_vm._s(scope.row.freeStorage.top)+\"；\")]),_vm._v(\" \"),_c('span',{class:{red: Number(scope.row.freeStorage.cenBottom) < 0.48}},[_vm._v(\"中下屏:\"+_vm._s(scope.row.freeStorage.cenBottom))])])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"frequency\",\"align\":\"center\",\"label\":\"数量\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"total\",\"align\":\"center\",\"label\":_vm.machineTotalLabel}})],1)],1),_vm._v(\" \"),(_vm.listData.length)?_c('g-pagination',{attrs:{\"total\":_vm.paganition.total,\"page-size\":_vm.paganition.pageSize,\"current-page\":_vm.paganition.currentPage},on:{\"changeCurrentPage\":_vm.changeCurrentPage,\"changeCurrentSize\":_vm.changeCurrentSize}}):_vm._e(),_vm._v(\" \"),(_vm.toastStatus)?_c('toast',{attrs:{\"message\":_vm.toastData.message,\"type\":_vm.toastData.type}}):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"list-header-right\"},[_c('div',[_c('span',{staticClass:\"online-icon\"}),_vm._v(\"\\n        在线\\n      \")]),_vm._v(\" \"),_c('div',[_c('span',{staticClass:\"outline-icon\"}),_vm._v(\"\\n        离线\\n      \")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1d4bd26f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/user/setting/Terminal.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1d4bd26f\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Terminal.vue\")\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1d4bd26f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./Terminal.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Terminal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Terminal.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1d4bd26f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Terminal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1d4bd26f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/setting/Terminal.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}