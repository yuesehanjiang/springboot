webpackJsonp([1],{"9jSU":function(t,s,e){"use strict";var a=e("oAV5"),i=e.n(a),o={props:["initType","disable"],data:function(){return{activeTab:this.$props.initType,tabs:[{text:"管理员",type:0},{text:"用户",type:1}],scale:1}},computed:{transform:function(){return"scale("+this.scale+","+this.scale+")"}},mounted:function(){window.onresize=i.a.throttle(function(){},300)},destroyed:function(){window.onresize=null},methods:{checkScale:function(){var t=document.body.clientWidth/1600;t=t>1?t:1,this.scale=t},changeTabItem:function(t){if(!this.$props.disable){var s=parseInt(t.target.dataset.type);this.activeTab=s,this.$emit("change",s)}}}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"login"},[e("div",{staticClass:"login-inner",style:{transform:t.transform}},[t._t("default"),t._v(" "),e("div",{staticClass:"tabs",on:{click:t.changeTabItem}},[this.$props.disable?[t._l(t.tabs,function(s,a){return[e("div",{directives:[{name:"show",rawName:"v-show",value:Number(t.activeTab)===s.type,expression:"Number(activeTab)===item.type"}],key:a,staticClass:"tab-item active",attrs:{"data-type":s.type}},[t._v("\n            "+t._s(s.text)+"\n          ")])]})]:t._l(t.tabs,function(s,a){return e("div",{key:a,staticClass:"tab-item",class:{active:Number(t.activeTab)===s.type},attrs:{"data-type":s.type}},[t._v("\n          "+t._s(s.text)+"\n        ")])})],2)],2)])},staticRenderFns:[]};var r=e("VU/8")(o,n,!1,function(t){e("XksY"),e("LSxK")},"data-v-36c643a6",null);s.a=r.exports},LSxK:function(t,s){},M96d:function(t,s){},XksY:function(t,s){},pK1i:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("E4LH"),i=e("t5DY"),o=e("5eyz"),n=e("vMJZ"),r=e("9jSU"),c=e("hNqL"),l={components:{Outer:r.a,Toast:c.a},data:function(){return{form:{mobilePhone:"",captcha:"",newPassword:"",confirmPassword:""},sendSmsTips:"发送验证码",sendSmsStatus:!1,loading:!1,toastStatus:!1,toastData:{},count:60}},deactivated:function(){this.timer=null},beforeCreate:function(){var t=Number(this.$route.query.type);0!==t&&1!==t&&this.$router.replace({path:"/login"})},methods:{validatePhone:function(){var t="";return a.a.isPhone(this.form.mobilePhone)||(t="手机号码不正确"),t&&this.setToastData({message:t,type:"fail"}),!t},sendSms:function(){var t=this;if(!this.sendSmsStatus&&this.validatePhone()){this.sendSmsStatus=!0;var s={phone:this.form.mobilePhone};0===Number(this.$route.query.type)&&(s.enterprise_name="1");var e=this.$route.query.type?i.b:i.a;this.cutdownTime(),e(s).then(function(s){"200"===s.code?t.setToastData({message:s.message}):(s.codde,t.setToastData({message:s.message,type:"fail"}))})}},cutdownTime:function(){this.sendSmsTips="倒计时"+this.count+"秒",this.count=this.count-1,this.timer=setTimeout(this.cutdownTime,1e3),this.count<0&&(this.sendSmsTips="发送验证码",this.count=60,this.sendSmsStatus=!1,clearTimeout(this.timer))},validateForm:function(){var t="";return a.a.isPhone(this.form.mobilePhone)?a.a.isNullString(this.form.captcha)?t="验证码不能为空":/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,20}$/.test(this.form.newPassword)?this.form.confirmPassword!==this.form.newPassword&&(t="两次密码不一致"):t="密码由 8 - 20 位字母和数字组成":t="手机号码不正确",t&&this.setToastData({message:t,type:"fail"}),!t},submit:function(){var t=this;if(!this.loading&&this.validateForm()){this.loading=!0;var s={phone:this.form.mobilePhone,code:this.form.captcha,password:this.form.newPassword,newPassword:this.form.confirmPassword};(0===Number(this.$route.query.type)?o.f:n.a)(s).then(function(s){t.loading=!1,"200"===s.code?t.setToastData({message:s.message,type:"success",callback:function(){t.$router.push({path:"/login"})}}):t.setToastData({message:s.message,type:"fail"})},function(){t.loading=!1,t.setToastData({message:"保存失败，请重试",type:"fail"})})}},setToastData:function(t){var s=this,e=t.message,a=t.type,i=t.callback;this.toastStatus=!0,this.$set(this.toastData,"message",e),this.$set(this.toastData,"type",a),setTimeout(function(){s.toastStatus=!1,"function"==typeof i&&i()},1200)}}},u={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("outer",{attrs:{initType:this.$route.query.type,disable:!0}},[e("p",{staticClass:"back-login",on:{click:function(s){t.$router.go(-1)}}},[e("a",{attrs:{href:"javascript:void(0)"}},[t._v("返回登录页")])]),t._v(" "),e("div",{staticClass:"form"},[e("div",{staticClass:"login-form-logo"}),t._v(" "),e("div",{staticClass:"input-container"},[e("label",{staticClass:"label",attrs:{for:"mobilePhone"}},[t._v("手机号码")]),t._v(" "),e("Input",{staticStyle:{width:"300px"},attrs:{size:"default",id:"mobilePhone",placeholder:"手机号码必须是11位",clearable:""},model:{value:t.form.mobilePhone,callback:function(s){t.$set(t.form,"mobilePhone",s)},expression:"form.mobilePhone"}}),t._v(" "),e("span",{staticClass:"send-code",class:{active:t.sendSmsStatus},on:{click:t.sendSms}},[t._v(t._s(t.sendSmsTips))])],1),t._v(" "),e("div",{staticClass:"input-container"},[e("label",{staticClass:"label",attrs:{for:"captcha"}},[t._v("验证码")]),t._v(" "),e("Input",{staticStyle:{width:"300px"},attrs:{size:"default",id:"captcha",placeholder:"验证码必须是6位",clearable:""},model:{value:t.form.captcha,callback:function(s){t.$set(t.form,"captcha",s)},expression:"form.captcha"}})],1),t._v(" "),e("div",{staticClass:"input-container"},[e("label",{staticClass:"label",attrs:{for:"newPassword"}},[t._v("新密码")]),t._v(" "),e("Input",{staticStyle:{width:"300px"},attrs:{type:"password",size:"default",id:"newPassword",placeholder:"密码由 8 - 20 位字母和数字组成",clearable:""},model:{value:t.form.newPassword,callback:function(s){t.$set(t.form,"newPassword",s)},expression:"form.newPassword"}})],1),t._v(" "),e("div",{staticClass:"input-container"},[e("label",{staticClass:"label",attrs:{for:"confirmPassword"}},[t._v("确认新密码")]),t._v(" "),e("Input",{staticStyle:{width:"300px"},attrs:{size:"default",type:"password",id:"confirmPassword",placeholder:"请确认密码",clearable:""},model:{value:t.form.confirmPassword,callback:function(s){t.$set(t.form,"confirmPassword",s)},expression:"form.confirmPassword"}})],1),t._v(" "),e("div",{staticClass:"submit-button",class:{loading:t.loading},on:{click:t.submit}},[t._v("保存")])]),t._v(" "),t.toastStatus?e("toast",{attrs:{message:t.toastData.message,type:t.toastData.type}}):t._e()],1)},staticRenderFns:[]};var d=e("VU/8")(l,u,!1,function(t){e("M96d")},"data-v-57ccd798",null);s.default=d.exports}});
//# sourceMappingURL=1.cb981c4bd9da36b75415.js.map