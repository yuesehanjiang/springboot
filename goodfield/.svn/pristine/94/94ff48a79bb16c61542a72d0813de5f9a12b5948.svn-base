webpackJsonp([35],{PS5R:function(s,t){},sm5H:function(s,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=a("t5DY"),o=a("y6zN"),r=a("5eyz"),i=a("/pQn"),n=a("7Gg6"),l=a("hNqL"),c={components:{Breadcrumb:n.a,Toast:l.a},data:function(){var s=this;return{originalPasswordForm:{originalPassword:""},originalPasswordRule:{originalPassword:Object(i.c)()},ruleForm:{captcha:"",newPassword:"",confirmPassword:""},rules:{captcha:Object(i.b)(),newPassword:Object(i.c)(),confirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,trigger:"blur",validator:i.f},{required:!0,trigger:"blur",validator:function(t,a,e){s.ruleForm.newPassword===s.ruleForm.confirmPassword?e():e(new Error("两次密码不一致"))}}]},toastStatus:!1,toastData:{},sendSmsStatus:!1,sendSmsTips:"发送验证码",count:60,phone:""}},mounted:function(){this.phone=Object(o.a)().phone},methods:{sendSms:function(){var s=this;this.$refs.originalPasswordForm.validate(function(t){if(t&&!s.sendSmsStatus){var a={phone:s.phone};s.cutdownTime(),Object(e.a)(a).then(function(t){"200"===t.code?s.setToastData({message:t.message,type:"success"}):s.setToastData({message:t.message,type:"fail"})})}})},confirm:function(){var s=this;this.$refs.originalPasswordForm.validate(function(t){s.$refs.ruleForm.validate(function(a){if(a&&t){var e={original:s.originalPasswordForm.originalPassword,code:s.ruleForm.captcha,password:s.ruleForm.newPassword};Object(r.c)(e).then(function(t){"200"===t.code?s.setToastData({message:"密码修改成功，需要重新登陆",callback:function(){Object(o.b)("admin")}}):s.setToastData({message:t.message,type:"fail"})})}})})},resetForm:function(){this.$refs.originalPasswordForm.resetFields(),this.$refs.ruleForm.resetFields()},cutdownTime:function(){this.sendSmsStatus=!0,this.sendSmsTips="倒计时"+this.count+"秒",this.count=this.count-1,this.timer=setTimeout(this.cutdownTime,1e3),this.count<0&&(this.sendSmsTips="发送验证码",this.count=60,this.sendSmsStatus=!1,clearTimeout(this.timer))},setToastData:function(s){var t=this,a=s.message,e=s.type;this.toastStatus=!0,this.$set(this.toastData,"message",a),this.$set(this.toastData,"type",e),setTimeout(function(){t.toastStatus=!1},1200)}}},m={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",[a("breadcrumb"),s._v(" "),a("div",{staticClass:"form-container"},[a("h4",{staticClass:"form-title"},[s._v("修改密码")]),s._v(" "),a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[s._v("登录账号：")]),s._v(" "),a("span",{staticClass:"form-value"},[s._v(s._s(s.$store.state.loginData.account))])]),s._v(" "),a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[s._v("绑定手机号：")]),s._v(" "),a("span",{staticClass:"form-value"},[s._v(s._s(s.$store.state.loginData.phone))])]),s._v(" "),a("el-form",{ref:"originalPasswordForm",staticClass:"form",attrs:{model:s.originalPasswordForm,rules:s.originalPasswordRule,"label-position":"left","label-width":"120px"}},[a("el-form-item",{staticStyle:{width:"370px",position:"relative"},attrs:{label:"原密码:",prop:"originalPassword"}},[a("el-input",{attrs:{maxlength:20,type:"text",placeholder:"密码由 8 - 20 位字母和数字组成"},model:{value:s.originalPasswordForm.originalPassword,callback:function(t){s.$set(s.originalPasswordForm,"originalPassword",t)},expression:"originalPasswordForm.originalPassword"}})],1)],1),s._v(" "),a("el-form",{ref:"ruleForm",staticClass:"form",attrs:{model:s.ruleForm,rules:s.rules,"label-position":"left","label-width":"120px"}},[a("el-form-item",{staticStyle:{width:"370px",position:"relative"},attrs:{label:"验证码:",prop:"captcha"}},[a("el-input",{attrs:{placeholder:"验证码为 6 位数字"},model:{value:s.ruleForm.captcha,callback:function(t){s.$set(s.ruleForm,"captcha",t)},expression:"ruleForm.captcha"}}),s._v(" "),a("span",{staticClass:"send-code",class:{active:s.sendSmsStatus},attrs:{maxlength:6},on:{click:s.sendSms}},[s._v(s._s(s.sendSmsTips))])],1),s._v(" "),a("el-form-item",{staticStyle:{width:"370px"},attrs:{label:"新密码:",prop:"newPassword"}},[a("el-input",{attrs:{maxlength:20,type:"password",placeholder:"密码由 8 - 20 位字母和数字组成"},model:{value:s.ruleForm.newPassword,callback:function(t){s.$set(s.ruleForm,"newPassword",t)},expression:"ruleForm.newPassword"}})],1),s._v(" "),a("el-form-item",{staticStyle:{width:"370px"},attrs:{label:"确认新密码:",prop:"confirmPassword"}},[a("el-input",{attrs:{maxlength:20,type:"password",placeholder:"请确认密码"},model:{value:s.ruleForm.confirmPassword,callback:function(t){s.$set(s.ruleForm,"confirmPassword",t)},expression:"ruleForm.confirmPassword"}})],1)],1),s._v(" "),a("div",{staticClass:"form-footer"},[a("span",{staticClass:"cancel-button",on:{click:s.resetForm}},[s._v("重置")]),s._v(" "),a("span",{staticClass:"confirm-button",on:{click:s.confirm}},[s._v("确定")])])],1),s._v(" "),s.toastStatus?a("toast",{attrs:{message:s.toastData.message,type:s.toastData.type}}):s._e()],1)},staticRenderFns:[]};var d=a("VU/8")(c,m,!1,function(s){a("PS5R")},"data-v-38b73318",null);t.default=d.exports}});
//# sourceMappingURL=35.585f167a77a3ea76a2df.js.map