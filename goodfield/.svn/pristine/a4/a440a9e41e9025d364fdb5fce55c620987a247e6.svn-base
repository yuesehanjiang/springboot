webpackJsonp([32],{C8ZH:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("FDGS"),a=s("y6zN"),n={components:{Modal:s("/o5o").a},data:function(){return{loading:!0,isEmpty:!1,isNoPower:!1,listData:{},deleting:!1,isDeleting:!1}},watch:{$route:function(){this.getList(Object.assign({},this.$route.query))}},beforeCreate:function(){var e=this.$route.query,t=e.pageSize,s=e.pageNum;void 0!==t&&void 0!==s||this.$router.replace({query:{pageSize:10,pageNum:0}})},mounted:function(){this.token=Object(a.a)(),this.getList(this.$route.query)},methods:{getList:function(e){var t=this;this.loading=!0,e.user_id=this.token.id,Object(i.h)(e).then(function(e){200===Number(e.code)?t.listData=e:201===Number(e.code)?t.isEmpty=!0:202===Number(e.code)?t.isNoPower=!0:t.$message({message:e.message,type:"warning"}),t.loading=!1})},pageNumChange:function(e){this.easyQuery({pageNum:e-1})},pageSizeChange:function(e){this.easyQuery({pageSize:e,pageNum:0})},easyQuery:function(e){var t=this.$route.query,s=Object.assign({},t,e);this.$router.push({path:this.$route.path,query:s})},deleteGreeting:function(e){var t=this;this.isDeleting=!0,Object(i.d)({id:e,userId:this.token.id}).then(function(e){t.isDeleting=!1,200===Number(e.code)?(t.deleting=!1,t.getList(t.$route.query),t.$message({message:"删除成功",type:"success"})):t.$message({message:e.message,type:"warning"})})}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"screen-container"},[e.isEmpty?i("div",{staticClass:"screen-empty"},[i("img",{attrs:{src:s("9Xu7"),alt:"empty_logo"}}),e._v(" "),i("p",{staticClass:"empty-title"},[e._v("还没有设置，请先\n      "),i("router-link",{attrs:{to:"/user/greetings/common/detail"}},[e._v("添加问候语")])],1)]):e.isNoPower?i("div",{staticClass:"screen-empty"},[i("img",{attrs:{src:s("9Xu7"),alt:"empty_logo"}}),e._v(" "),i("p",{staticClass:"empty-title"},[e._v("没有模块权限，请与管理员确认")])]):i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"screen-body"},[i("div",{staticClass:"screen-body-header"},[i("router-link",{attrs:{to:"/user/greetings/common/detail",tag:"button"}},[e._v("添加问候语")])],1),e._v(" "),i("div",{staticClass:"screen-body-container"},e._l(e.listData.data,function(t,s){return i("div",{key:t.id,staticClass:"greetings-list"},[i("div",{staticClass:"greetings-item"},[i("div",{staticClass:"greetings-label"},[e._v("适用门店")]),e._v(" "),i("div",{staticClass:"greetings-content"},[e._v(e._s(t.roles[0]&&t.roles[0].stores_name))])]),e._v(" "),i("div",{staticClass:"greetings-item"},[i("div",{staticClass:"greetings-label"},[e._v("会员问候语")]),e._v(" "),i("div",{staticClass:"greetings-content"},[e._l(t.name.split("{{name}}"),function(s,a){return[i("span",{key:"str"+a},[e._v(e._s(s))]),e._v(" "),a+1!==t.name.split("{{name}}").length?i("span",{key:"m"+a,staticClass:"greetings-member"},[e._v("会员名称")]):e._e()]})],2)]),e._v(" "),i("div",{staticClass:"greetings-menu"},[i("p",{staticClass:"greetings-menu-title"},[e._v("通用问候语"+e._s(s+1))]),e._v(" "),i("router-link",{staticClass:"greetings-edit-btn",attrs:{to:"/user/greetings/common/detail/"+t.id,tag:"div"}},[i("i",{staticClass:"edit-icon"})]),e._v(" "),i("div",{staticClass:"greetings-delete-btn",on:{click:function(s){e.deleting=t.id}}},[i("i",{staticClass:"delete-btn"})])],1)])})),e._v(" "),i("div",{staticClass:"screen-body-footer"},[i("Page",{attrs:{total:Number(e.listData.total),current:Number(e.listData.pageNum)+1,"page-size":Number(e.listData.pageSize),"show-sizer":"","show-elevator":"","show-total":"",transfer:!1},on:{"on-change":e.pageNumChange,"on-page-size-change":e.pageSizeChange}})],1)]),e._v(" "),!1!==e.deleting?i("Modal",{attrs:{modalTitle:"删除",loading:e.isDeleting},on:{cancelModal:function(t){e.deleting=!1},confirmModal:function(t){e.deleteGreeting(e.deleting)}}},[e._v("确认删除该通用问候语吗\n  ")]):e._e()],1)},staticRenderFns:[]};var o=s("VU/8")(n,r,!1,function(e){s("s7DA")},"data-v-4f6185ec",null);t.default=o.exports},s7DA:function(e,t){}});
//# sourceMappingURL=32.95370ff28604fdcee45d.js.map