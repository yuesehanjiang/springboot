{"version":3,"sources":["webpack:///src/views/user/components/SelectStore.vue","webpack:///./src/views/user/components/SelectStore.vue?957a","webpack:///./src/views/user/components/SelectStore.vue","webpack:///src/views/user/greetings/Detail2.vue","webpack:///./src/views/user/greetings/Detail2.vue?dd87","webpack:///./src/views/user/greetings/Detail2.vue"],"names":["components","Modal","Toast","GCheckbox","CheckBox","props","createModalStatus","type","Boolean","default","editUserId","String","Number","selected","Array","data","serverData","userSeletedIdArr","this","currentCityIndex","allStoreLength","toastStatus","toastData","computed","storeChoosedLength","length","mounted","token","Object","tool","stores","getListData","methods","_this","Promise","all","getStoreListByUserId","user_id","id","then","res","code","allStores","newUserSeletedIdArr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","concat","_toConsumableArray","split","err","return","tempStoreData","forEach","item","index","hasOwnProperty","stores_city","area_name","stores_id","stores_name","children","child","active","indexOf","push","finalStoreData","firstCity","key","lib_message_default","a","warning","message","getList","shop","buildLists","_this2","lists","listItem","handleConfirm","$emit","changeCity","itemIndex","chooseShopItem","storeId","storeIdIndex","splice","handleCancel","setToastData","_ref","_this3","callback","$set","setTimeout","components_SelectStore","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","modal-title","on","cancelModal","confirmModal","_l","class","click","$event","_v","_s","checked","label","change","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","SelectStore","ssrContext","__webpack_exports__","Detail2","Breadcrumb","FormTitle","loading","name_array","name_input","form","submitting","user_name","watch","old","isTooLong","$message","pop","map","v","join","name","addName","$refs","input","focus","deleteName","removeName","str","validate","utils_validate","isNullString","reset","submit","exclusive","$route","query","greetings","$router","back","_this4","params","catch","greetings_Detail2","tag","to","directives","rawName","expression","label-position","label-width","nativeOn","preventDefault","keydown","_k","keyCode","input-writing","ref","placeholder","domProps","target","composing"],"mappings":"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","file":"static/js/8.1c9a7fd9d22961121a5b.js","sourcesContent":["<template>\n  <modal v-if='serverData.length' class='edit-shop-modal'\n    :modal-title=\"`选择门店 ( ${storeChoosedLength}/${allStoreLength} ) `\"\n         @cancelModal='handleCancel'\n         @confirmModal='handleConfirm'>\n    <div class=\"modal-content-slot\">\n      <ul class=\"modal-content-left\">\n        <li v-for='(item, index) in serverData' :key='index'\n            @click='changeCity(index)'\n            :class=\"{active: item.active}\"\n            class=\"modal-content-left-item\">{{item.area_name}}\n        </li>\n      </ul>\n      <div class=\"modal-content-right\">\n        <g-checkbox\n          class=\"g-checkbox\"\n          v-for='(item, index) in serverData[currentCityIndex].children' :key='index'\n          :checked=\"item.active\"\n          @change=\"chooseShopItem(currentCityIndex, index, item.stores_id)\"\n          :label='item.stores_name'>\n        </g-checkbox>\n      </div>\n    </div>\n    <toast\n      v-if='toastStatus'\n      :message='toastData.message'\n      :type='toastData.type'>\n    </toast>\n  </modal>\n</template>\n\n<script>\nimport { getStoreListByUserId, getStoreListByUserIdForGreeting } from 'api/shop'\n\nimport Modal from 'components/Modal'\nimport Toast from 'components/Toast'\nimport GCheckbox from 'components/CheckBox'\nimport { Message } from 'element-ui'\nimport { getToken } from 'utils/tool'\n\nexport default {\n  components: {Modal, Toast, GCheckbox},\n  props: {\n    createModalStatus: {\n      type: Boolean,\n      default: true\n    },\n    editUserId: [String, Number],\n    type: String,\n    selected: {\n      type: Array,\n      default: function () {\n        return []\n      }\n    }\n  },\n  data () {\n    return {\n      // 服务器数据\n      serverData: [],\n      userSeletedIdArr: this.selected, // 用户选中的店铺\n      currentCityIndex: 0, // 当前选中的城市索引\n      allStoreLength: 0, // 门店总数\n      // 功能性变量\n      toastStatus: false, // 控制toast显示隐藏\n      toastData: {} // toast的内容\n    }\n  },\n  computed: {\n    storeChoosedLength () {\n      return this.userSeletedIdArr.length\n    }\n  },\n  mounted () {\n    this.token = getToken()\n    this.stores = {}\n    this.getListData()\n  },\n  methods: {\n    getListData () {\n      Promise.all([this.getStoreListByUserId({'user_id': this.token.id})]).then(res => {\n        if (res[0].code === '200') {\n          let allStores = res[0].data\n          // 用户店铺列表数据\n          // 用户选中的店铺 id\n          let userSeletedIdArr = this.userSeletedIdArr // 实际上当前页面传过来的prop【selected】是字符串\n          let newUserSeletedIdArr = []\n          for (let value of userSeletedIdArr) {\n            newUserSeletedIdArr = [...newUserSeletedIdArr, ...value.split(',')]\n          }\n          userSeletedIdArr = newUserSeletedIdArr\n          // 所有店铺列表数据\n          let tempStoreData = {}\n          allStores.forEach((item, index) => {\n            if (!tempStoreData.hasOwnProperty(item.stores_city)) {\n              tempStoreData[item.stores_city] = {\n                area_name: item.stores_city,\n                stores_id: item.stores_id,\n                stores_name: item.stores_name,\n                children: []\n              }\n            }\n            const child = {\n              area_name: item.stores_city,\n              stores_id: item.stores_id,\n              stores_name: item.stores_name,\n              active: userSeletedIdArr.indexOf(item.stores_id) >= 0\n            }\n            this.stores[item.stores_id] = child\n            tempStoreData[item.stores_city].active = false\n            tempStoreData[item.stores_city].children.push(child)\n          })\n          let finalStoreData = []\n          let firstCity = true\n          for (let key in tempStoreData) {\n            if (firstCity) {\n              firstCity = false\n              tempStoreData[key].active = true\n              finalStoreData.push(tempStoreData[key])\n            } else {\n              tempStoreData[key].active = false\n              finalStoreData.push(tempStoreData[key])\n            }\n          }\n          this.allStoreLength = allStores.length\n          this.serverData = finalStoreData\n          this.userSeletedIdArr = userSeletedIdArr\n        } else if (res[0].code === '201') {\n          // 没有分配\n          Message.warning({\n            message: '您的账号下没有分配门店，请确认后再试'\n          })\n        }\n      })\n    },\n    // 获取当前用户选中的门店\n    getStoreListByUserId () {\n      let getList\n      switch (this.type) {\n        case 'greeting':\n          getList = getStoreListByUserIdForGreeting\n          break\n        default:\n          getList = getStoreListByUserId\n      }\n      return getList({user_id: this.editUserId})\n    },\n    // 构建更新用户店铺数据的请求数据\n    buildLists () {\n      let userSeletedIdArr = this.userSeletedIdArr\n      let lists = []\n      userSeletedIdArr.forEach(item => {\n        let listItem = {\n          stores_id: item,\n          stores_name: this.stores[item].stores_name,\n          area_name: this.stores[item].stores_city,\n          user_id: this.editUserId\n        }\n        lists.push(listItem)\n      })\n      return lists\n    },\n    // 更新指定用户店铺列表信息\n    handleConfirm () {\n      let lists = this.buildLists()\n      this.$emit('hideEditShopModal')\n      this.$emit('comfirmSelected', lists)\n    },\n    // 改变当前城市城市\n    changeCity (index) {\n      let serverData = this.serverData\n      serverData.forEach((item, itemIndex) => {\n        item.active = itemIndex === index\n      })\n      this.currentCityIndex = index\n      this.serverData = serverData\n    },\n    // 选择门店\n    chooseShopItem (currentCityIndex, index, storeId) {\n      let userSeletedIdArr = this.userSeletedIdArr\n      let storeIdIndex = userSeletedIdArr.indexOf(storeId)\n      if (storeIdIndex >= 0) {\n        userSeletedIdArr.splice(storeIdIndex, 1)\n      } else {\n        userSeletedIdArr.push(storeId)\n      }\n      let serverData = this.serverData\n      serverData[currentCityIndex].children[index].active = !serverData[currentCityIndex].children[index].active\n      this.userSeletedIdArr = userSeletedIdArr\n      this.serverData = serverData\n    },\n    handleCancel () {\n      this.$emit('hideEditShopModal')\n    },\n    setToastData ({message, type, callback}) {\n      this.toastStatus = true\n      this.$set(this.toastData, 'message', message)\n      this.$set(this.toastData, 'type', type)\n      setTimeout(() => {\n        this.toastStatus = false\n        callback && callback()\n      }, 1200)\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n  .edit-shop-modal /deep/ .modal-content\n    padding 0\n\n  .modal-content-slot\n    display flex\n    border-bottom 1px solid #eaeaea\n    overflow hidden\n\n  .modal-content-left\n    padding-bottom 15px\n    width 143px\n    height 400px\n    overflow auto\n    line-height 14px\n    font-size 14px\n    text-align center\n    border-right 1px solid #EAEAEA\n\n  .modal-content-left-item\n    margin-top 15px\n    cursor pointer\n    &.active\n      color #217EE6\n\n  .modal-content-right\n    min-height 400px\n    display flex\n    flex-wrap wrap\n    justify-content flex-start\n    align-content flex-start\n    padding 20px 23px\n    width 676px\n    height 400px\n    overflow auto\n    box-sizing border-box\n    .g-checkbox\n      margin 0 23px 18px 0\n      &:nth-child(4n)\n        margin-right 0\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/user/components/SelectStore.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.serverData.length)?_c('modal',{staticClass:\"edit-shop-modal\",attrs:{\"modal-title\":(\"选择门店 ( \" + _vm.storeChoosedLength + \"/\" + _vm.allStoreLength + \" ) \")},on:{\"cancelModal\":_vm.handleCancel,\"confirmModal\":_vm.handleConfirm}},[_c('div',{staticClass:\"modal-content-slot\"},[_c('ul',{staticClass:\"modal-content-left\"},_vm._l((_vm.serverData),function(item,index){return _c('li',{key:index,staticClass:\"modal-content-left-item\",class:{active: item.active},on:{\"click\":function($event){_vm.changeCity(index)}}},[_vm._v(_vm._s(item.area_name)+\"\\n      \")])})),_vm._v(\" \"),_c('div',{staticClass:\"modal-content-right\"},_vm._l((_vm.serverData[_vm.currentCityIndex].children),function(item,index){return _c('g-checkbox',{key:index,staticClass:\"g-checkbox\",attrs:{\"checked\":item.active,\"label\":item.stores_name},on:{\"change\":function($event){_vm.chooseShopItem(_vm.currentCityIndex, index, item.stores_id)}}})}))]),_vm._v(\" \"),(_vm.toastStatus)?_c('toast',{attrs:{\"message\":_vm.toastData.message,\"type\":_vm.toastData.type}}):_vm._e()],1):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1caf0921\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/user/components/SelectStore.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1caf0921\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SelectStore.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SelectStore.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SelectStore.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1caf0921\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./SelectStore.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1caf0921\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/components/SelectStore.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <Breadcrumb>\n      <router-link tag=\"li\" :to=\"'/user/greetings/custom'\">问候语</router-link>\n      <li>专属问候语</li>\n    </Breadcrumb>\n    <FormTitle>设置问候语</FormTitle>\n    <div class=\"greeting-form\" v-loading=\"loading\">\n      <Form label-position=\"right\" :label-width=\"124\" @submit.native.prevent @keydown.native.enter.prevent>\n        <FormItem label=\"会员问候语\">\n          <div class=\"greeting-input\">\n            <ul class=\"greeting-box\">\n              <template v-for=\"(item,index) in name_array\">\n                <li :key=\"'i'+index\">{{ item }}</li>\n                <li :key=\"'n'+index\" class=\"write-member\">\n                  <span>{{user_name}}</span>\n                  <i class=\"remove-member\" @click=\"removeName(index)\"></i>\n                </li>\n              </template>\n              <li class=\"write-input\" :class=\"{'input-writing':name!==''}\">\n                <input @keydown.delete=\"deleteName\" v-model=\"name_input\" type=\"text\" @submit.native.prevent\n                       :placeholder=\"name===''?'请输入问候语，字数上限36字符（含中、英文及特殊符号等）':''\" ref=\"input\"/>\n              </li>\n            </ul>\n          </div>\n          <span class=\"add-name\" @click=\"addName\">+ 添加会员名</span>\n        </FormItem>\n        <FormItem>\n          <button class=\"form-btn\" @click=\"reset\">重置</button>\n          <button class=\"form-btn primary-btn\" :class=\"{submitting:submitting}\" @click=\"submit\">确定</button>\n        </FormItem>\n      </Form>\n    </div>\n  </div>\n</template>\n<script>\nimport Breadcrumb from 'views/user/components/Breadcrumb'\nimport FormTitle from 'views/user/components/FormTitle'\nimport SelectStore from 'views/user/components/SelectStore'\nimport { getToken } from 'utils/tool'\nimport Validate from 'utils/validate'\nimport { getCustomGreeting, addCustomGreeting } from 'api/greetings'\n\nexport default {\n  components: {Breadcrumb, FormTitle, SelectStore},\n  data () {\n    return {\n      loading: false,\n      name_array: [],\n      name_input: '',\n      form: {\n        user_id: ''\n      },\n      submitting: false,\n      user_name: ''\n    }\n  },\n  watch: {\n    name_input: function (value, old) {\n      if (this.isTooLong) {\n        this.name_input = old\n        this.$message({\n          message: '专属问候语最长为36个字符',\n          type: 'warning'\n        })\n      }\n    },\n    name_array: function () {\n      if (this.isTooLong) {\n        this.name_array.pop()\n        this.$message({\n          message: '专属问候语最长为36个字符',\n          type: 'warning'\n        })\n      }\n    }\n  },\n  computed: {\n    isTooLong: function () {\n      return (this.name_array.map(v => v + this.user_name).join('') + this.name_input).length > 36\n    },\n    name: function () {\n      return this.name_array.map(v => v + this.user_name).join('') + this.name_input\n    }\n  },\n  methods: {\n    addName () {\n      if ((this.name_input + this.user_name).length > 36) {\n        this.$message({\n          message: '专属问候语最长为36个字符',\n          type: 'warning'\n        })\n        return\n      }\n      this.name_array.push(this.name_input)\n      this.name_input = ''\n      this.$refs.input && this.$refs.input.focus()\n    },\n    deleteName () {\n      if (this.name_input === '') {\n        this.name_input = this.name_array.pop() || ''\n      }\n    },\n    removeName (index) {\n      if (index === (this.name_array.length - 1)) {\n        let str = this.name_array.splice(index, 1)\n        this.name_input = str + this.name_input\n      } else {\n        this.name_array[index + 1] = this.name_array[index] + this.name_array[index + 1]\n        this.name_array.splice(index, 1)\n      }\n      this.$refs.input && this.$refs.input.focus()\n    },\n    validate () {\n      if (Validate.isNullString(this.name)) {\n        this.$message({\n          message: '会员问候语不能为空',\n          type: 'warning'\n        })\n        return false\n      }\n      return true\n    },\n    reset () {\n      this.name_array = []\n      this.name_input = ''\n    },\n    submit () {\n      if (!this.submitting && this.validate()) {\n        this.submitting = true\n        let data = {\n          exclusive: this.name,\n          user_id: this.token.id,\n          id: this.$route.query.user_id\n        }\n        let submit = addCustomGreeting\n        submit(data).then(res => {\n          this.submitting = false\n          if (Number(res.code) === 200) {\n            this.$message({\n              message: res.message,\n              type: 'success'\n            })\n            this.$router.back()\n          } else {\n            this.$message({\n              message: res.message,\n              type: 'warning'\n            })\n          }\n        })\n      }\n    }\n  },\n  mounted () {\n    let token = getToken()\n    this.token = token\n    this.form.user_id = token.id\n    if (this.$route.params.id) {\n      this.loading = true\n      let id = this.$route.params.id\n      getCustomGreeting({id, user_id: this.$route.query.user_id}).then(res => {\n        if (Number(res.code) === 200) {\n          this.user_name = res.data.user_name\n          this.name_array = res.data.exclusive.split(this.user_name)\n          this.name_input = this.name_array.pop()\n        } else if (res.code !== '201') {\n          this.$message({\n            message: res.message,\n            type: 'warning'\n          })\n        }\n        this.loading = false\n      }).catch(() => {\n        this.loading = false\n      })\n    }\n  }\n}\n</script>\n<style lang='stylus'>\n  .greeting-form\n    label.ivu-form-item-label\n      font-size 14px\n\n  .greeting-form\n    .ivu-input\n      font-size 14px\n      height 36px\n\n</style>\n<style lang='stylus' scoped>\n  .greeting-form\n    width 664px\n    font-size 14px\n\n  .edit-store\n    position: absolute\n    top 1px\n    bottom 1px\n    right 0\n    width 35px\n    border-left 1px solid #EAEAEA\n    display flex\n    align-items center\n    justify-content center\n\n  .edit-store-icon\n    display inline-block\n    background url('~@/assets/edit.png') no-repeat center\n    background-size 100% 100%\n    width 14px\n    height 14px\n\n  .add-name\n    display inline-block\n    margin-top 6px\n    color #666666\n    font-size 14px\n    cursor pointer\n\n  .form-btn\n    margin-right 40px\n    background #EAEAEA\n    color #666666\n    width 110px\n    height 35px\n    line-height 35px\n    box-shadow 0px 2px 4px 0px rgba(234, 234, 234, 0.6)\n    border-radius 20px\n    border none\n    font-size 14px\n    outline none\n    &.primary-btn\n      background #24CF5F\n      color #FFFFFF\n      box-shadow 0px 2px 4px 0px rgba(36, 207, 95, 0.6)\n\n  .greeting-input\n    display: inline-block;\n    width: 100%;\n    line-height: 1.5;\n    padding: 4px 7px;\n    font-size: 14px;\n    border: 1px solid #dcdee2;\n    border-radius: 4px;\n    color: #515a6e;\n    background-color: #fff;\n    background-image: none;\n    position: relative;\n    cursor: text;\n    transition: border .2s ease-in-out, background .2s ease-in-out, box-shadow .2s ease-in-out;\n\n  .greeting-box\n    display flex\n    flex-direction row\n    height 100%\n    line-height 26px\n    color #333333\n    flex-wrap wrap\n    & > li\n      word-break break-all\n\n  .write-input\n    min-width 380px\n    display flex\n    flex 1\n    &.input-writing\n      min-width 200px\n    input\n      flex 1\n      border none\n      outline none\n      color #333333\n      width 100%\n\n  .write-input input::-webkit-input-placeholder {\n    color: #c5c8ce;\n  }\n\n  .write-input input:-moz-placeholder {\n    color: #c5c8ce;\n  }\n\n  .write-input input::-moz-placeholder {\n    color: #c5c8ce;\n  }\n\n  .write-input input:-ms-input-placeholder {\n    color: #c5c8ce;\n  }\n\n  .write-member\n    width 42px\n    color #2162D2\n    margin-left 20px\n    margin-right 30px\n    position: relative\n\n  .remove-member\n    cursor pointer\n    position absolute\n    top 0\n    right -10px\n    display inline-block\n    background url('~@/assets/delete_xs.png') no-repeat center\n    background-size 100% 100%\n    width 9px\n    height 9px\n\n  .submitting\n    opacity 0.5\n    cursor progress\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/user/greetings/Detail2.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Breadcrumb',[_c('router-link',{attrs:{\"tag\":\"li\",\"to\":'/user/greetings/custom'}},[_vm._v(\"问候语\")]),_vm._v(\" \"),_c('li',[_vm._v(\"专属问候语\")])],1),_vm._v(\" \"),_c('FormTitle',[_vm._v(\"设置问候语\")]),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"greeting-form\"},[_c('Form',{attrs:{\"label-position\":\"right\",\"label-width\":124},nativeOn:{\"submit\":function($event){$event.preventDefault();},\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();}}},[_c('FormItem',{attrs:{\"label\":\"会员问候语\"}},[_c('div',{staticClass:\"greeting-input\"},[_c('ul',{staticClass:\"greeting-box\"},[_vm._l((_vm.name_array),function(item,index){return [_c('li',{key:'i'+index},[_vm._v(_vm._s(item))]),_vm._v(\" \"),_c('li',{key:'n'+index,staticClass:\"write-member\"},[_c('span',[_vm._v(_vm._s(_vm.user_name))]),_vm._v(\" \"),_c('i',{staticClass:\"remove-member\",on:{\"click\":function($event){_vm.removeName(index)}}})])]}),_vm._v(\" \"),_c('li',{staticClass:\"write-input\",class:{'input-writing':_vm.name!==''}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name_input),expression:\"name_input\"}],ref:\"input\",attrs:{\"type\":\"text\",\"placeholder\":_vm.name===''?'请输入问候语，字数上限36字符（含中、英文及特殊符号等）':''},domProps:{\"value\":(_vm.name_input)},on:{\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"delete\",[8,46],$event.key,[\"Backspace\",\"Delete\"])){ return null; }return _vm.deleteName($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.name_input=$event.target.value}},nativeOn:{\"submit\":function($event){$event.preventDefault();}}})])],2)]),_vm._v(\" \"),_c('span',{staticClass:\"add-name\",on:{\"click\":_vm.addName}},[_vm._v(\"+ 添加会员名\")])]),_vm._v(\" \"),_c('FormItem',[_c('button',{staticClass:\"form-btn\",on:{\"click\":_vm.reset}},[_vm._v(\"重置\")]),_vm._v(\" \"),_c('button',{staticClass:\"form-btn primary-btn\",class:{submitting:_vm.submitting},on:{\"click\":_vm.submit}},[_vm._v(\"确定\")])])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1788ddb6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/user/greetings/Detail2.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1788ddb6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Detail2.vue\")\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1788ddb6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./Detail2.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Detail2.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Detail2.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1788ddb6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Detail2.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1788ddb6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/greetings/Detail2.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}