{"version":3,"sources":["webpack:///./src/api/auth.js","webpack:///src/views/admin/auth/components/EditShop.vue","webpack:///./src/views/admin/auth/components/EditShop.vue?7247","webpack:///./src/views/admin/auth/components/EditShop.vue","webpack:///src/views/admin/auth/List.vue","webpack:///./src/views/admin/auth/List.vue?7230","webpack:///./src/views/admin/auth/List.vue"],"names":["data","Object","__WEBPACK_IMPORTED_MODULE_0_utils_request__","method","url","EditShop","components","Modal","Toast","GCheckbox","CheckBox","props","createModalStatus","type","Boolean","default","editUserId","String","Number","serverData","userSeletedIdArr","currentCityIndex","allStoreLength","toastStatus","toastData","computed","storeChoosedLength","this","length","currentChildrenAllChoosed","flag","currentChildren","children","currentChildrenLength","i","active","mounted","getListData","methods","_this","Promise","all","getStoreListByUserId","getStoreList","then","res","code","userStores","allStores","userInitialSeletedIdArr","forEach","item","index","push","stores_id","tempStoreData","hasOwnProperty","stores_city","title","stores_name","indexOf","finalStoreData","firstCity","key","allSelectedIdArr","shop","user_id","buildLists","_this2","lists","listItem","clickChoosedAll","newAddChildren","splice","_i","concat","_toConsumableArray","compareInitialAndCurrent","initLength","count","j","handleConfirm","_this3","handleCancel","$message","message","$emit","changeCity","itemIndex","chooseShopItem","storeId","storeIdIndex","setToastData","_ref","_this4","callback","$set","setTimeout","components_EditShop","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","modal-title","on","cancelModal","confirmModal","_l","class","click","$event","_v","_s","checked","label","change","_e","staticRenderFns","auth_components_EditShop","__webpack_require__","normalizeComponent","ssrContext","GPagination","Pagination","keyword","$route","query","specialListData","listData","paganition","loading","editShopModalStatus","editAuthStatus","editAuthUserId","authWidth","authExpanded","accountStatus","phoneStatus","tableThClassName","hasMatchKeywordListData","watch","_$route$query","pageNum","pageSize","is","undefined","$router","replace","path","beforeCreate","_$route$query2","_extends","easyQuery","arguments","prevQuery","assign","changeCurrentPage","changeCurrentSize","_ref2","inputContent","utils_default","a","throttle","leading","auth","handleListData","handleSpecialListData","parseInt","currentPage","total","catch","getDefaultAuthList","relid","listDataLength","newListData","listItemRolesLength","roles","_loop","defaultAuthList","listItemRolesItem","newListItem","id","username","account","phone","storeName","authList","row","canEditAuth","isMoreTag","span","defaultItem","relations","relation","_newListItem","_loop2","_newListItem2","expandMore","forwardListData","expandListData","beyondListData","expandListDataLength","firstMeetIdIndex","expandListDataLastItem","closeMore","_ref3","showEditShopModal","userId","hideEditShopModal","showEditAuth","hideEditAuth","selectAuth","column","event","property","navigateToUserList","objectSpanMethod","_ref4","columnIndex","rowIndex","columnNumber","operationIndex","rowNumber","rowspan","colspan","external__Vuex_","setCurrentEditUser","auth_List","ref","staticStyle","width","placeholder","prefix-icon","input","model","value","$$v","expression","directives","name","rawName","size","border","span-method","header-click","prop","fixed","align","scopedSlots","_u","fn","scope","class-name","display","disabled","page-size","current-page","updateUserStoreSuccess","List_Component","List_normalizeComponent","List","__webpack_exports__"],"mappings":"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","file":"static/js/10.179a51233ae60f31a463.js","sourcesContent":["import request from 'utils/request'\n// 获取所有用户的权限列表\nexport function getUserAuthList (data) {\n  return request({\n    method: 'post',\n    url: '/goodfield/web/admin/listUserRoleRelationsInfo',\n    data\n  })\n}\n// 获取设置权限列表\nexport function getAuthListByUserId (data) {\n  return request({\n    method: 'post',\n    url: '/goodfield/web/admin/getUserRoleRelationInfo',\n    data\n  })\n}\n// 设置权限\nexport function updateUserAuthList (data) {\n  return request({\n    method: 'post',\n    url: '/goodfield/web/admin/addUserRoleRelation',\n    data\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/auth.js","<template>\n  <modal v-if='serverData.length' class='edit-shop-modal' :modal-title=\"`选择门店 ( ${storeChoosedLength}/${allStoreLength} ) `\" @cancelModal='handleCancel' @confirmModal='handleConfirm'>\n    <div class=\"modal-content-slot\">\n      <ul class=\"modal-content-left\">\n        <li v-for='(item, index) in serverData' :key='index'\n          @click='changeCity(index)'\n          :class=\"{active: item.active}\"\n          class=\"modal-content-left-item\">{{item.title}}</li>\n      </ul>\n      <div>\n        <div @click='clickChoosedAll' class='shop-operation'>\n          <span :class='{active: currentChildrenAllChoosed}' class=\"allchoosed-icon\"></span>\n          <span class=\"allchoosed-text\">全选</span>\n        </div>\n        <div class=\"modal-content-right\">\n          <g-checkbox\n            class=\"g-checkbox\"\n            v-for='(item, index) in serverData[currentCityIndex].children' :key='index'\n            :checked=\"item.active\"\n            @change=\"chooseShopItem(currentCityIndex, index, item.stores_id)\"\n            :label='item.stores_name'>\n          </g-checkbox>\n        </div>\n      </div>\n    </div>\n    <toast\n      v-if='toastStatus'\n      :message='toastData.message'\n      :type='toastData.type'>\n    </toast>\n  </modal>\n</template>\n\n<script>\nimport {getStoreList, getStoreListByUserId, updateStoreListByUserId} from 'api/shop'\n\nimport Modal from 'components/Modal'\nimport Toast from 'components/Toast'\nimport GCheckbox from 'components/CheckBox'\nexport default {\n  components: {Modal, Toast, GCheckbox},\n  props: {\n    createModalStatus: {\n      type: Boolean,\n      default: true\n    },\n    editUserId: [String, Number]\n  },\n  data () {\n    return {\n      // 服务器数据\n      serverData: [],\n      userSeletedIdArr: [], // 用户选中的店铺\n      currentCityIndex: 0, // 当前选中的城市索引\n      allStoreLength: 0, // 所有门店的总数目\n      // 功能性变量\n      toastStatus: false, // 控制toast显示隐藏\n      toastData: {} // toast的内容\n    }\n  },\n  computed: {\n    storeChoosedLength () {\n      return this.userSeletedIdArr.length\n    },\n    currentChildrenAllChoosed () {\n      let flag = true\n      let serverData = this.serverData\n      let currentChildren = serverData[this.currentCityIndex].children\n      let currentChildrenLength = currentChildren.length\n      for (let i = 0; i < currentChildrenLength; i++) {\n        if (!currentChildren[i].active) {\n          flag = false\n          break\n        }\n      }\n      return flag\n    }\n  },\n  mounted () {\n    this.getListData()\n  },\n  methods: {\n    /*\n     * 合并请求\n     * 一个是用户选中的门店数据\n     * 一个是所有门店的数据\n     * 对两个数据进行对比，选中的使用active: true\n     */\n    getListData () {\n      Promise.all([this.getStoreListByUserId(), this.getStoreList()]).then(res => {\n        // res.code === '201'时，用户目前只有门店，但是后台尚未门店的权限数据\n        if ((res[0].code === '200' || res[0].code === '201') && res[1].code === '200') {\n          let userStores = res[0].code === '201' ? [] : res[0].data\n          let allStores = res[1].data\n          // 用户店铺列表数据\n          let userSeletedIdArr = [] // 用户选中的店铺 id\n          let userInitialSeletedIdArr = [] // 用户初始选中的数值\n          userStores.forEach((item, index) => {\n            userSeletedIdArr.push(item.stores_id)\n            userInitialSeletedIdArr.push(item.stores_id)\n          })\n          let tempStoreData = {}\n          // 所有店铺列表数据\n          allStores.forEach((item, index) => {\n            if (!tempStoreData.hasOwnProperty(item.stores_city)) {\n              tempStoreData[item.stores_city] = {\n                title: item.stores_city,\n                children: []\n              }\n            }\n\n            tempStoreData[item.stores_city].children.push({\n              stores_id: item.stores_id,\n              stores_name: item.stores_name,\n              active: res[0].code === '201' ? false : userSeletedIdArr.indexOf(item.stores_id) >= 0\n            })\n            // 默认选中城市\n            tempStoreData[item.stores_city].active = false\n          })\n          let finalStoreData = []\n          let firstCity = true\n          for (let key in tempStoreData) {\n            if (firstCity) {\n              firstCity = false\n              tempStoreData[key].active = true\n              finalStoreData.push(tempStoreData[key])\n            } else {\n              tempStoreData[key].active = false\n              finalStoreData.push(tempStoreData[key])\n            }\n          }\n          this.allStoreLength = allStores.length\n          this.serverData = finalStoreData\n          this.userInitialSeletedIdArr = userInitialSeletedIdArr\n          this.userSeletedIdArr = userSeletedIdArr // 选中的id构建成一个数组\n          this.allSelectedIdArr = userSeletedIdArr // 所有选中的数据，不作修改，当用户全部门店取消的时候，用作构建请求json数据\n        }\n      })\n    },\n    // 获取当前用户选中的门店\n    getStoreListByUserId () {\n      return getStoreListByUserId({user_id: this.editUserId})\n    },\n    // 获取店铺列表数据\n    getStoreList () {\n      return getStoreList({})\n    },\n    // 构建更新用户店铺数据的请求数据\n    buildLists () {\n      let userSeletedIdArr = this.userSeletedIdArr\n      let lists = []\n      if (userSeletedIdArr.length) {\n        userSeletedIdArr.forEach(item => {\n          let listItem = {\n            stores_id: item,\n            user_id: this.editUserId\n          }\n          lists.push(listItem)\n        })\n      } else {\n        lists = [{user_id: this.editUserId, stores_id: ''}]\n      }\n      return lists\n    },\n    clickChoosedAll () {\n      let serverData = this.serverData\n      let userSeletedIdArr = this.userSeletedIdArr\n      let currentChildren = this.serverData[this.currentCityIndex].children\n      let currentChildrenLength = currentChildren.length\n      let newAddChildren = []\n      if (this.currentChildrenAllChoosed) {\n        for (let i = 0; i < currentChildrenLength; i++) {\n          currentChildren[i].active = false\n          let index = userSeletedIdArr.indexOf(currentChildren[i].stores_id)\n          if (index > -1) {\n            userSeletedIdArr.splice(index, 1)\n          }\n        }\n      } else {\n        for (let i = 0; i < currentChildrenLength; i++) {\n          if (!currentChildren[i].active) {\n            newAddChildren.push(currentChildren[i].stores_id)\n            currentChildren[i].active = true\n          }\n        }\n      }\n      this.userSeletedIdArr = [...userSeletedIdArr, ...newAddChildren]\n      this.serverData = serverData\n    },\n    // 对比当前选中数据与初始数据，判断是否修改了选中的门店\n    compareInitialAndCurrent () {\n      let userInitialSeletedIdArr = this.userInitialSeletedIdArr\n      let initLength = userInitialSeletedIdArr.length\n      let userSeletedIdArr = this.userSeletedIdArr\n      let currentLength = userSeletedIdArr.length\n      let flag = true\n      if (initLength !== currentLength) {\n        flag = false\n      } else {\n        let count = 0\n        for (let i = 0; i < initLength; i++) {\n          for (let j = 0; j < initLength; j++) {\n            if (userInitialSeletedIdArr[i] === userSeletedIdArr[j]) {\n              count++\n            }\n          }\n        }\n        if (count === initLength) {\n          flag = true\n        } else {\n          flag = false\n        }\n      }\n      return flag\n    },\n    // 更新指定用户店铺列表信息\n    handleConfirm () {\n      if (this.compareInitialAndCurrent()) {\n        // this.setToastData({\n        //   message: '您没有修改任何门店，请先修改门店',\n        //   type: 'fail'\n        // })\n        this.handleCancel()\n        return\n      }\n      let lists = this.buildLists()\n      updateStoreListByUserId({lists}).then(res => {\n        if (res.code === '200') {\n          this.$message({\n            message: res.message,\n            type: 'success'\n          })\n          this.handleCancel()\n          this.$emit('updateUserStoreSuccess')\n        } else {\n          this.$message({\n            message: res.message,\n            type: 'error'\n          })\n        }\n      })\n    },\n    // 改变当前城市城市\n    changeCity (index) {\n      let serverData = this.serverData\n      serverData.forEach((item, itemIndex) => {\n        if (itemIndex === index) {\n          item.active = true\n        } else {\n          item.active = false\n        }\n      })\n      this.currentCityIndex = index\n      this.serverData = serverData\n    },\n    // 选择门店\n    chooseShopItem (currentCityIndex, index, storeId) {\n      let userSeletedIdArr = this.userSeletedIdArr\n      let storeIdIndex = userSeletedIdArr.indexOf(storeId)\n      if (storeIdIndex >= 0) {\n        userSeletedIdArr.splice(storeIdIndex, 1)\n      } else {\n        userSeletedIdArr.push(storeId)\n      }\n      let serverData = this.serverData\n      serverData[currentCityIndex].children[index].active = !serverData[currentCityIndex].children[index].active\n      this.userSeletedIdArr = userSeletedIdArr\n      this.serverData = serverData\n    },\n    handleCancel () {\n      this.$emit('hideEditShopModal')\n    },\n    setToastData ({message, type, callback}) {\n      this.toastStatus = true\n      this.$set(this.toastData, 'message', message)\n      this.$set(this.toastData, 'type', type)\n      setTimeout(() => {\n        this.toastStatus = false\n        callback && callback()\n      }, 1200)\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.edit-shop-modal >>> .modal-content\n  padding 0\n.modal-content-slot\n  display flex\n  border-bottom 1px solid #eaeaea\n.modal-content-left\n  padding-bottom 15px\n  width 140px\n  line-height 14px\n  font-size 14px\n  text-align center\n  border-right 1px solid #EAEAEA\n  height 440px\n  overflow auto\n.modal-content-left-item\n  margin-top 15px\n  cursor pointer\n  &.active\n    color #217EE6\n.shop-operation\n  margin-right 43px\n  display flex\n  justify-content flex-end\n  align-items center\n  height 40px\n  line-height 40px\n  text-align right\n  cursor pointer\n  .allchoosed-icon\n    margin-right 10px\n    display inline-block\n    height 20px\n    width 20px\n    border-radius 20px\n    background #d6d6d6 url('~@/assets/all_choose.png') no-repeat center\n    background-size 13px 9px\n    &.active\n      background-color #24cf5f\n  .allchoosed-text\n    font-size 14px\n    color #666\n.modal-content-right\n  height 400px\n  overflow auto\n  display flex\n  flex-wrap wrap\n  justify-content flex-start\n  align-content flex-start\n  padding 0 23px 20px 23px\n  width 676px\n  box-sizing border-box\n  .g-checkbox\n    margin 0 23px 18px 0\n    &:nth-child(4n)\n      margin-right 0\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/admin/auth/components/EditShop.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.serverData.length)?_c('modal',{staticClass:\"edit-shop-modal\",attrs:{\"modal-title\":(\"选择门店 ( \" + _vm.storeChoosedLength + \"/\" + _vm.allStoreLength + \" ) \")},on:{\"cancelModal\":_vm.handleCancel,\"confirmModal\":_vm.handleConfirm}},[_c('div',{staticClass:\"modal-content-slot\"},[_c('ul',{staticClass:\"modal-content-left\"},_vm._l((_vm.serverData),function(item,index){return _c('li',{key:index,staticClass:\"modal-content-left-item\",class:{active: item.active},on:{\"click\":function($event){_vm.changeCity(index)}}},[_vm._v(_vm._s(item.title))])})),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"shop-operation\",on:{\"click\":_vm.clickChoosedAll}},[_c('span',{staticClass:\"allchoosed-icon\",class:{active: _vm.currentChildrenAllChoosed}}),_vm._v(\" \"),_c('span',{staticClass:\"allchoosed-text\"},[_vm._v(\"全选\")])]),_vm._v(\" \"),_c('div',{staticClass:\"modal-content-right\"},_vm._l((_vm.serverData[_vm.currentCityIndex].children),function(item,index){return _c('g-checkbox',{key:index,staticClass:\"g-checkbox\",attrs:{\"checked\":item.active,\"label\":item.stores_name},on:{\"change\":function($event){_vm.chooseShopItem(_vm.currentCityIndex, index, item.stores_id)}}})}))])]),_vm._v(\" \"),(_vm.toastStatus)?_c('toast',{attrs:{\"message\":_vm.toastData.message,\"type\":_vm.toastData.type}}):_vm._e()],1):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-29af69d5\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/admin/auth/components/EditShop.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-29af69d5\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./EditShop.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditShop.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditShop.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29af69d5\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./EditShop.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-29af69d5\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/admin/auth/components/EditShop.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"list\">\n    <div ref='listHeader' class=\"list-header\">\n      <h3 class=\"list-title\">权限管理</h3>\n      <div class=\"add-container\">\n        <el-input\n          style='width: 360px'\n          @input='inputContent'\n          placeholder=\"可搜索用户名、登录账号、绑定手机\"\n          prefix-icon=\"el-icon-search\"\n          v-model=\"keyword\">\n        </el-input>\n      </div>\n    </div>\n    <div v-loading='loading' >\n      <div class='auth-table-container' v-if='listData.length'>\n        <el-table\n          v-loading='loading'\n          v-if='!editAuthStatus'\n          @header-click='selectAuth'\n          :data=\"specialListData\"\n          size='large'\n          border\n          :span-method=\"objectSpanMethod\"\n          style=\"width: 100%;\">\n          <el-table-column\n            prop=\"index\"\n            fixed\n            width='60'\n            label=\"序号\"\n            align='center'>\n          </el-table-column>\n          <el-table-column\n            prop=\"username\"\n            align='center'\n            fixed\n            label=\"用户姓名\">\n          </el-table-column>\n          <el-table-column\n            v-if='accountStatus'\n            ref='account'\n            prop=\"account\"\n            align='center'\n            label=\"登录账号\">\n          </el-table-column>\n          <el-table-column\n            v-if='phoneStatus'\n            ref='phone'\n            prop=\"phone\"\n            align='center'\n            label=\"绑定手机号码\">\n          </el-table-column>\n          <el-table-column\n            ref='store'\n            prop=\"storeName\"\n            type='index'\n            width='170'\n            align='center'\n            label=\"门店\">\n            <template slot-scope=\"scope\">\n              <p v-if='scope.row.isMoreTag === 1' class='more-tag' @click=\"expandMore(scope.row.id)\">{{scope.row.storeName}}</p>\n              <p v-else-if='scope.row.isMoreTag === 2' class='more-tag' @click=\"closeMore(scope.row.id)\">{{scope.row.storeName}}</p>\n              <p v-else>{{scope.row.storeName}}</p>\n            </template>\n          </el-table-column>\n          <el-table-column\n            :class-name='tableThClassName'\n            ref='authTableTh'\n            prop=\"authList\"\n            align='center'\n            :width='authWidth'\n            label=\"选择权限\">\n            <template slot-scope=\"scope\">\n              <div class=\"select-auth-td-content\">\n                <p class=\"edit-shop-tips\" v-if='!scope.row.storeId'>请编辑门店</p>\n                <div v-else>\n                  <div\n                    class=\"el-checkbox-container\"\n                    style=\"display: inline-block\"\n                    v-for='(item, index) in scope.row.authList'\n                    :key='item.relid'\n                    v-if=\"authExpanded || index < 2\">\n                    <el-checkbox disabled v-model=\"item.checked\">\n                      {{item.title}}\n                    </el-checkbox>\n                  </div>\n                  <span v-if=\"!authExpanded\" class=\"ellipsis\">......</span>\n                </div>\n              </div>\n            </template>\n          </el-table-column>\n          <el-table-column\n            prop=\"operation\"\n            fixed='right'\n            align='center'\n            width='160'\n            label=\"操作\">\n            <template slot-scope=\"scope\">\n              <span class=\"operation-text-button\" @click='showEditShopModal(scope.row.id)'>编辑门店</span>\n              <span class=\"operation-text-button\" @click='showEditAuth(scope.row.id, scope.row.canEditAuth)'>设置权限</span>\n            </template>\n          </el-table-column>\n        </el-table>\n      </div>\n    </div>\n    <div class='no-data-container' v-show='!loading && !listData.length'>\n      <div>\n        <div v-if='!hasMatchKeywordListData' class=\"gray-logo\"></div>\n        <p v-if='!hasMatchKeywordListData' class=\"no-data-tips\">\n          <span>还没有用户，请去</span>\n          <span @click=\"navigateToUserList\" class=\"special-text\">创建用户</span>\n        </p>\n        <p v-else class='no-data-tips'>没有匹配的数据，请修改筛选关键词</p>\n      </div>\n    </div>\n    <g-pagination\n      v-if='specialListData.length'\n      @changeCurrentPage='changeCurrentPage'\n      @changeCurrentSize='changeCurrentSize'\n      :total='paganition.total'\n      :page-size='paganition.pageSize'\n      :current-page='paganition.currentPage'>\n    </g-pagination>\n    <edit-shop\n      v-if='editShopModalStatus'\n      @updateUserStoreSuccess='getListData($route.query)'\n      @hideEditShopModal='hideEditShopModal'\n      :editUserId='editUserId'>\n    </edit-shop>\n    <toast\n      v-if='toastStatus'\n      :message='toastData.message'\n      :type='toastData.type'>\n    </toast>\n  </div>\n</template>\n\n<script>\nimport { getUserAuthList } from 'api/auth'\nimport { mapMutations } from 'vuex'\nimport Utils from 'utils/utils'\n\nimport Modal from 'components/Modal'\nimport EditShop from './components/EditShop'\nimport Toast from 'components/Toast'\nimport GPagination from 'components/Pagination'\n\nexport default {\n  components: {EditShop, Modal, Toast, GPagination},\n  data () {\n    return {\n      // 服务器数据\n      keyword: this.$route.query.keyword,\n      // 不完整的列表数据，只有点击更多的时候，就会从完整的列表数据中，获取所点击的数据，并拼接到specialListData\n      specialListData: [],\n      // 完整的列表数据\n      listData: [],\n\n      paganition: {}, // 分页\n      loading: true, // 是否正在加载数据\n      // toast\n      toastStatus: false,\n      toastData: {},\n      // 编辑门店的变量\n      editUserId: 0, // 当前编辑门店的用户\n      editShopModalStatus: false, // 编辑门店modal显示隐藏\n      // 编辑权限的变量\n      editAuthStatus: false, // 编辑权限设置\n      editAuthUserId: 0, // 点击设置权限时的用户 id\n      // table\n      authWidth: '410', // 权限列的宽度\n      authExpanded: false, // 权限列是否展开\n      accountStatus: true, // 账号列的显示隐藏\n      phoneStatus: true // 绑定手机号列的显示隐藏\n    }\n  },\n  computed: {\n    tableThClassName () {\n      if (this.authExpanded) {\n        return 'auth-table-th-td active'\n      } else {\n        return 'auth-table-th-td'\n      }\n    },\n    hasMatchKeywordListData () {\n      if (this.keyword.length && this.listData.length <= 0) {\n        return true\n      } else {\n        return false\n      }\n    }\n  },\n  watch: {\n    '$route': function () {\n      let {pageNum, pageSize, keyword} = this.$route.query\n      if (Object.is(pageNum, undefined) && Object.is(pageSize, undefined) && Object.is(keyword, undefined)) {\n        this.$router.replace({\n          path: this.$route.path,\n          query: {\n            pageNum: 0,\n            pageSize: 10,\n            keyword: ''\n          }\n        })\n      } else {\n        this.getListData(this.$route.query)\n      }\n    }\n  },\n  beforeCreate () {\n    let {pageNum, pageSize, keyword} = this.$route.query\n    if (Object.is(pageNum, undefined) && Object.is(pageSize, undefined) && Object.is(keyword, undefined)) {\n      this.$router.replace({\n        path: this.$route.path,\n        query: {\n          pageNum: 0,\n          pageSize: 10,\n          keyword: ''\n        }\n      })\n    }\n  },\n  mounted () {\n    this.getListData(this.$route.query)\n  },\n  methods: {\n    easyQuery (data = {}) {\n      let prevQuery = this.$route.query\n      let query = Object.assign({}, prevQuery, data)\n      this.$router.push({path: this.$route.path, query})\n    },\n    changeCurrentPage ({pageNum}) {\n      this.easyQuery({\n        pageNum\n      })\n    },\n    changeCurrentSize ({pageSize}) {\n      this.easyQuery({\n        pageNum: 0,\n        pageSize\n      })\n    },\n    inputContent: Utils.throttle(function () {\n      this.easyQuery({\n        keyword: this.keyword,\n        pageNum: 0\n      })\n    }, 1000, {leading: false}),\n    // 获取列表\n    getListData (data) {\n      getUserAuthList(data).then(res => {\n        if (res.code === '200') {\n          this.listData = this.handleListData(res)\n          this.specialListData = this.handleSpecialListData(res)\n          this.paganition = {\n            pageSize: parseInt(res.pageSize),\n            currentPage: parseInt(res.pageNum) + 1,\n            total: parseInt(res.total)\n          }\n        } else if (res.code === '201') {\n          this.listData = []\n        } else if (res.code !== '201') {\n          this.listData = []\n          this.setToastData({\n            message: res.message,\n            type: 'fail'\n          })\n        }\n        this.loading = false\n      }).catch(() => {\n        this.loading = false\n      })\n    },\n    // 默认权限\n    getDefaultAuthList () {\n      return [{\n        relid: 1,\n        checked: false,\n        title: '入场人数统计'\n      }, {\n        relid: 2,\n        checked: false,\n        title: '自定义问候语'\n      }, {\n        relid: 3,\n        checked: false,\n        title: '会员管理'\n      }, {\n        relid: 4,\n        checked: false,\n        title: '入场报告'\n      }, {\n        relid: 5,\n        checked: false,\n        title: '稽核报告'\n      }, {\n        relid: 6,\n        checked: false,\n        title: '三屏播放管理'\n      }]\n    },\n    // 处理列表数据,返回完整的listData数据\n    handleListData (res) {\n      let listData = res.data\n      let pageSize = res.pageSize\n      let pageNum = res.pageNum\n      let listDataLength = listData.length\n      let newListData = []\n\n      for (let i = 0; i < listDataLength; i++) {\n        let listItem = listData[i]\n        let listItemRolesLength = listItem.roles.length\n        if (listItemRolesLength) {\n          let flag = true\n          for (let j = 0; j < listItemRolesLength; j++) {\n            const defaultAuthList = this.getDefaultAuthList()\n            let listItemRolesItem = listItem.roles[j]\n            const newListItem = {}\n            newListItem.id = listItem.id\n            newListItem.username = listItem.username\n            newListItem.account = listItem.account\n            newListItem.phone = listItem.phone\n            newListItem.storeId = listItemRolesItem.stores_id\n            newListItem.storeName = listItemRolesItem.stores_name\n            newListItem.authList = defaultAuthList\n            newListItem.row = 0\n            newListItem.canEditAuth = 1\n            newListItem.isMoreTag = 0\n            newListItem.index = (pageSize * pageNum) + i + 1\n            if (flag) {\n              flag = false\n              newListItem.span = listItemRolesLength\n            } else {\n              newListItem.span = 0\n            }\n            // 性能问题\n            newListItem.authList.forEach(defaultItem => {\n              listItemRolesItem.relations.forEach(relation => {\n                if (defaultItem.relid === relation.relid) {\n                  defaultItem.checked = true\n                }\n              })\n            })\n            newListData.push(newListItem)\n            // }\n          }\n        } else {\n          const defaultAuthList = []\n          const newListItem = {}\n          newListItem.id = listItem.id\n          newListItem.username = listItem.username\n          newListItem.account = listItem.account\n          newListItem.phone = listItem.phone\n          newListItem.storeId = 0\n          newListItem.storeName = '- / -'\n          newListItem.authList = defaultAuthList\n          newListItem.span = 1\n          newListItem.canEditAuth = 0\n          newListItem.index = (pageSize * pageNum) + i + 1\n          newListData.push(newListItem)\n        }\n      }\n      return newListData\n    },\n    handleSpecialListData (res) {\n      let listData = res.data\n      let pageSize = res.pageSize\n      let pageNum = res.pageNum\n      let listDataLength = listData.length\n      let newListData = []\n\n      for (let i = 0; i < listDataLength; i++) {\n        let listItem = listData[i]\n        let listItemRolesLength = listItem.roles.length\n        if (listItemRolesLength) {\n          if (listItemRolesLength > 2) {\n            listItemRolesLength = 3\n          }\n          let flag = true\n          for (let j = 0; j < listItemRolesLength; j++) {\n            const defaultAuthList = [{\n              relid: 1,\n              checked: false,\n              title: '入场人数统计'\n            }, {\n              relid: 2,\n              checked: false,\n              title: '自定义问候语'\n            }, {\n              relid: 3,\n              checked: false,\n              title: '会员管理'\n            }, {\n              relid: 4,\n              checked: false,\n              title: '入场报告'\n            }, {\n              relid: 5,\n              checked: false,\n              title: '稽核报告'\n            }, {\n              relid: 6,\n              checked: false,\n              title: '三屏播放管理'\n            }]\n            const newListItem = {}\n            let listItemRolesItem = listItem.roles[j]\n            if (j === listItemRolesLength - 1 && j !== 0 && listItemRolesLength > 2) {\n              newListItem.id = listItem.id // 用户id\n              newListItem.username = listItem.username // 用户名\n              newListItem.account = listItem.account // 用户账号\n              newListItem.phone = listItem.phone // 用户手机号码\n              newListItem.storeId = 0 // 门店的id\n              newListItem.storeName = '更多' // 门店的名称\n              newListItem.authList = [] // 门店权限列表\n              newListItem.span = 0 // 合并列数\n              newListItem.row = 2 // 合并行数\n              newListItem.isMoreTag = 1 // 是不是更多\n              newListItem.canEditAuth = 1\n              newListItem.index = (pageSize * pageNum) + i + 1\n            } else {\n              newListItem.id = listItem.id\n              newListItem.username = listItem.username\n              newListItem.account = listItem.account\n              newListItem.phone = listItem.phone\n              newListItem.storeId = listItemRolesItem.stores_id\n              newListItem.storeName = listItemRolesItem.stores_name\n              newListItem.authList = defaultAuthList\n              newListItem.isMoreTag = 0\n              newListItem.row = 0\n              newListItem.canEditAuth = 1\n              newListItem.index = (pageSize * pageNum) + i + 1\n              if (flag) {\n                flag = false\n                newListItem.span = listItemRolesLength\n              } else {\n                newListItem.span = 0\n              }\n              newListItem.authList.forEach(defaultItem => {\n                listItemRolesItem.relations.forEach(relation => {\n                  if (defaultItem.relid === relation.relid) {\n                    defaultItem.checked = true\n                  }\n                })\n              })\n            }\n            newListData.push(newListItem)\n          }\n        } else {\n          const defaultAuthList = []\n          const newListItem = {}\n          newListItem.id = listItem.id\n          newListItem.username = listItem.username\n          newListItem.account = listItem.account\n          newListItem.phone = listItem.phone\n          newListItem.storeId = 0\n          newListItem.storeName = '- / -'\n          newListItem.authList = defaultAuthList\n          newListItem.span = 1\n          newListItem.canEditAuth = 0\n          newListItem.isMoreTag = 0\n          newListItem.index = (pageSize * pageNum) + i + 1\n          newListData.push(newListItem)\n        }\n      }\n      return newListData\n    },\n    /**\n     * 点击 ‘更多’，listData会相应变化\n     * */\n    expandMore (id) {\n      let listData = this.listData\n      let specialListData = this.specialListData\n      let forwardListData = [] // 可能再展开数据【前面】的那些数据\n      let expandListData = [] // 展开的数据\n      let beyondListData = [] // 可能再展开数据【后面】的那些数据\n      listData.forEach((item) => {\n        if (item.id === id) {\n          if (item.span !== 0) {\n            item.span += 1\n          }\n          expandListData.push(item)\n        }\n      })\n      let expandListDataLength = expandListData.length\n      expandListData[0].span = expandListDataLength + 1\n      let firstMeetIdIndex = -1 // 第一次遇见 展开数据的位置\n      specialListData.forEach((item, index) => {\n        if (firstMeetIdIndex === -1 && item.id === id) {\n          firstMeetIdIndex = index\n        } else if (firstMeetIdIndex === -1 && item.id !== id) {\n          forwardListData.push(item)\n        } else if (firstMeetIdIndex !== -1 && item.id !== id) {\n          beyondListData.push(item)\n        }\n      })\n      const expandListDataLastItem = {\n        id: id,\n        username: '',\n        account: '',\n        phone: '',\n        storeId: 0,\n        storeName: '收起',\n        authList: [],\n        span: 0,\n        row: 2,\n        isMoreTag: 2\n      }\n      expandListData.push(expandListDataLastItem)\n      this.specialListData = [...forwardListData, ...expandListData, ...beyondListData]\n    },\n    closeMore (id) {\n      let listData = this.listData\n      let specialListData = this.specialListData\n      let forwardListData = [] // 可能在展开数据【前面】的那些数据\n      let expandListData = [] // 展开的数据\n      let beyondListData = [] // 可能在展开数据【后面】的那些数据\n      // 最终的数据 specialListData = [...forwardListData, ...expandListData, ...beyondListData]\n\n      let listDataLength = listData.length\n      for (let i = 0; i < listDataLength; i++) {\n        let item = listData[i]\n        if (expandListData.length === 2) {\n          break\n        }\n        if (item.id === id) {\n          if (item.span !== 0) {\n            item.span = 3\n          }\n          expandListData.push(item)\n        }\n      }\n\n      let firstMeetIdIndex = -1 // 第一次遇见 展开数据的位置，也就是第一次遇见 id 的位置\n      specialListData.forEach((item, index) => {\n        if (firstMeetIdIndex === -1 && item.id === id) {\n          firstMeetIdIndex = index\n        } else if (firstMeetIdIndex === -1 && item.id !== id) {\n          forwardListData.push(item)\n        } else if (firstMeetIdIndex !== -1 && item.id !== id) {\n          beyondListData.push(item)\n        }\n      })\n      const expandListDataLastItem = { id, username: '', account: '', phone: '', storeId: 0, storeName: '更多', authList: [], span: 0, row: 2, isMoreTag: 1 }\n      expandListData.push(expandListDataLastItem)\n      this.specialListData = [...forwardListData, ...expandListData, ...beyondListData]\n    },\n    setToastData ({message, type, callback}) {\n      this.toastStatus = true\n      this.$set(this.toastData, 'message', message)\n      this.$set(this.toastData, 'type', type)\n      setTimeout(() => {\n        this.toastStatus = false\n        callback && callback()\n      }, 1200)\n    },\n    // 显示编辑门店\n    showEditShopModal (userId) {\n      this.editUserId = userId\n      this.editShopModalStatus = true\n    },\n    // 隐藏编辑门店\n    hideEditShopModal () {\n      this.editShopModalStatus = false\n    },\n    // 显示编辑权限\n    showEditAuth (id, canEditAuth) {\n      if (canEditAuth) {\n        this.editAuthUserId = id\n        this.$router.push({\n          path: `/admin/auth/list/edit_auth/${id}`\n        })\n      } else {\n        this.setToastData({\n          message: '请先编辑门店',\n          type: 'fail'\n        })\n      }\n    },\n    // 隐藏编辑权限\n    hideEditAuth () {\n      this.editAuthStatus = false\n    },\n    // 展开隐藏权限\n    selectAuth (column, event) {\n      // 判断点击的是不是选择权限\n      if (column.property === 'authList') {\n        if (this.authExpanded) {\n          this.authExpanded = false\n          this.accountStatus = true\n          this.phoneStatus = true\n          this.authWidth = '360'\n        } else {\n          this.authExpanded = true\n          this.accountStatus = false\n          this.phoneStatus = false\n          this.authWidth = '760'\n        }\n      }\n    },\n    navigateToUserList () {\n      this.$router.push({path: '/admin/user_list'})\n    },\n    // 控制table的表格合并\n    objectSpanMethod ({row, column, rowIndex, columnIndex}) {\n      // columnNumber 1 到 columnNumber 列需要合并成一个表格\n      let columnNumber = 4\n      let operationIndex = 6\n\n      let rowNumber = 4 // 合并门店和选择权限\n      if (this.authExpanded) {\n        columnNumber = 2\n        operationIndex = 4\n\n        rowNumber = 2\n      }\n\n      // 合并序号，用户名称，登陆账号，绑定手机\n      if (columnIndex < columnNumber || columnIndex === operationIndex) {\n        if (row.span > 1) {\n          return {\n            rowspan: row.span,\n            colspan: 1\n          }\n        } else if (row.span === 0) {\n          return {\n            rowspan: 0,\n            colspan: 0\n          }\n        } else {\n          return {\n            rowspan: 1,\n            colspan: 1\n          }\n        }\n      }\n\n      // 用户门店多于两个时，合并门店和选择权限为 【更多】\n      if (columnIndex === rowNumber || columnIndex === rowNumber + 1) {\n        if (row.row > 1) {\n          return {\n            rowspan: 1,\n            colspan: row.row\n          }\n        } else if (row.row === 0) {\n          return {\n            rowspan: 1,\n            colspan: 1\n          }\n        } else {\n          return {\n            rowspan: 1,\n            colspan: 1\n          }\n        }\n      }\n    },\n    ...mapMutations({\n      setCurrentEditUser: 'SET_CURRENT_EDIT_USER'\n    })\n  }\n}\n</script>\n<style lang=\"stylus\">\n  th.auth-table-th-td\n    .cell:after\n      content ' 展开 >>'\n      display inline-block\n      margin-left 10px\n      font-size 12px\n      color #217EE6\n  th.auth-table-th-td.active\n    .cell:after\n      content ' << 收起'\n  .auth-table-container .el-table__body tr.hover-row>td\n    background-color #fff\n  .auth-table-container .el-table--enable-row-hover .el-table__body tr:hover>td\n    background-color #fff\n</style>\n\n<style lang=\"stylus\" scoped>\n  .list-header\n    padding 16px 40px 16px 20px\n    display flex\n    justify-content space-between\n    align-items center\n    border-bottom 1px solid #f5f5f5\n\n  .list-title\n    font-size 18px\n    font-weight normal\n\n  .add-container\n    display flex\n    align-items center\n\n  .add-icon\n    display inline-block\n    height 38px\n    width 38px\n    background url('~@/assets/set_up.png') no-repeat center\n    background-size contain\n    cursor pointer\n\n  .add-text\n    margin-left 10px\n    font-size 14px\n    color #666666\n    cursor pointer\n\n  #list-table\n    margin-top 0\n  .more-tag\n    color #217EE6\n    cursor pointer\n  .special-text\n    color rgba(36, 207, 95, 1)\n    cursor pointer\n\n  .no-data-container\n    display flex\n    justify-content center\n    align-items center\n    height calc(100vh - 170px)\n\n  .gray-logo\n    margin 0 auto 10px\n    height 117px\n    width 73px\n    background url('~@/assets/empty_logo.gif') no-repeat center\n\n  .edit-shop-tips\n    text-align center\n    color #b1b1b1\n\n  .no-data-tips\n    font-size 12px\n    text-align center\n    color #b1b1b1\n\n  .select-auth-td\n    color #a8a8a8\n\n  .el-checkbox-container\n    display inline-block\n    padding-left 25px\n    text-align center\n  // 修改el-checkbox默认样式\n  .el-checkbox-item >>> span.el-checkbox__label\n    color #666\n  .el-checkbox-item >>> .el-checkbox__input.is-disabled.is-checked .el-checkbox__inner\n    border-color #2162D2\n    background-color #2162d2\n  .el-checkbox-item >>> .el-checkbox__input.is-disabled.is-checked .el-checkbox__inner::after\n      border-color white\n  .select-auth-td-content\n    overflow hidden\n    white-space nowrap\n    text-overflow ellipsis\n    text-align left\n\n  .store-name\n    margin 0 10px 0 5px\n    display inline-block\n    width 60px\n\n  .more-store\n    margin-top 20px\n    color #217EE6\n    cursor pointer\n\n  .operation-text-button\n    cursor pointer\n    color #2162d2\n\n  .operation-text-button:first-child\n    margin-right 10px\n\n  // 编辑权限\n  .edit-auth\n    position relative\n  .ellipsis\n    margin-left 20px\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/admin/auth/List.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"list\"},[_c('div',{ref:\"listHeader\",staticClass:\"list-header\"},[_c('h3',{staticClass:\"list-title\"},[_vm._v(\"权限管理\")]),_vm._v(\" \"),_c('div',{staticClass:\"add-container\"},[_c('el-input',{staticStyle:{\"width\":\"360px\"},attrs:{\"placeholder\":\"可搜索用户名、登录账号、绑定手机\",\"prefix-icon\":\"el-icon-search\"},on:{\"input\":_vm.inputContent},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}})],1)]),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[(_vm.listData.length)?_c('div',{staticClass:\"auth-table-container\"},[(!_vm.editAuthStatus)?_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.specialListData,\"size\":\"large\",\"border\":\"\",\"span-method\":_vm.objectSpanMethod},on:{\"header-click\":_vm.selectAuth}},[_c('el-table-column',{attrs:{\"prop\":\"index\",\"fixed\":\"\",\"width\":\"60\",\"label\":\"序号\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"username\",\"align\":\"center\",\"fixed\":\"\",\"label\":\"用户姓名\"}}),_vm._v(\" \"),(_vm.accountStatus)?_c('el-table-column',{ref:\"account\",attrs:{\"prop\":\"account\",\"align\":\"center\",\"label\":\"登录账号\"}}):_vm._e(),_vm._v(\" \"),(_vm.phoneStatus)?_c('el-table-column',{ref:\"phone\",attrs:{\"prop\":\"phone\",\"align\":\"center\",\"label\":\"绑定手机号码\"}}):_vm._e(),_vm._v(\" \"),_c('el-table-column',{ref:\"store\",attrs:{\"prop\":\"storeName\",\"type\":\"index\",\"width\":\"170\",\"align\":\"center\",\"label\":\"门店\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.isMoreTag === 1)?_c('p',{staticClass:\"more-tag\",on:{\"click\":function($event){_vm.expandMore(scope.row.id)}}},[_vm._v(_vm._s(scope.row.storeName))]):(scope.row.isMoreTag === 2)?_c('p',{staticClass:\"more-tag\",on:{\"click\":function($event){_vm.closeMore(scope.row.id)}}},[_vm._v(_vm._s(scope.row.storeName))]):_c('p',[_vm._v(_vm._s(scope.row.storeName))])]}}])}),_vm._v(\" \"),_c('el-table-column',{ref:\"authTableTh\",attrs:{\"class-name\":_vm.tableThClassName,\"prop\":\"authList\",\"align\":\"center\",\"width\":_vm.authWidth,\"label\":\"选择权限\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"select-auth-td-content\"},[(!scope.row.storeId)?_c('p',{staticClass:\"edit-shop-tips\"},[_vm._v(\"请编辑门店\")]):_c('div',[_vm._l((scope.row.authList),function(item,index){return (_vm.authExpanded || index < 2)?_c('div',{key:item.relid,staticClass:\"el-checkbox-container\",staticStyle:{\"display\":\"inline-block\"}},[_c('el-checkbox',{attrs:{\"disabled\":\"\"},model:{value:(item.checked),callback:function ($$v) {_vm.$set(item, \"checked\", $$v)},expression:\"item.checked\"}},[_vm._v(\"\\n                    \"+_vm._s(item.title)+\"\\n                  \")])],1):_vm._e()}),_vm._v(\" \"),(!_vm.authExpanded)?_c('span',{staticClass:\"ellipsis\"},[_vm._v(\"......\")]):_vm._e()],2)])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"operation\",\"fixed\":\"right\",\"align\":\"center\",\"width\":\"160\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"operation-text-button\",on:{\"click\":function($event){_vm.showEditShopModal(scope.row.id)}}},[_vm._v(\"编辑门店\")]),_vm._v(\" \"),_c('span',{staticClass:\"operation-text-button\",on:{\"click\":function($event){_vm.showEditAuth(scope.row.id, scope.row.canEditAuth)}}},[_vm._v(\"设置权限\")])]}}])})],1):_vm._e()],1):_vm._e()]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loading && !_vm.listData.length),expression:\"!loading && !listData.length\"}],staticClass:\"no-data-container\"},[_c('div',[(!_vm.hasMatchKeywordListData)?_c('div',{staticClass:\"gray-logo\"}):_vm._e(),_vm._v(\" \"),(!_vm.hasMatchKeywordListData)?_c('p',{staticClass:\"no-data-tips\"},[_c('span',[_vm._v(\"还没有用户，请去\")]),_vm._v(\" \"),_c('span',{staticClass:\"special-text\",on:{\"click\":_vm.navigateToUserList}},[_vm._v(\"创建用户\")])]):_c('p',{staticClass:\"no-data-tips\"},[_vm._v(\"没有匹配的数据，请修改筛选关键词\")])])]),_vm._v(\" \"),(_vm.specialListData.length)?_c('g-pagination',{attrs:{\"total\":_vm.paganition.total,\"page-size\":_vm.paganition.pageSize,\"current-page\":_vm.paganition.currentPage},on:{\"changeCurrentPage\":_vm.changeCurrentPage,\"changeCurrentSize\":_vm.changeCurrentSize}}):_vm._e(),_vm._v(\" \"),(_vm.editShopModalStatus)?_c('edit-shop',{attrs:{\"editUserId\":_vm.editUserId},on:{\"updateUserStoreSuccess\":function($event){_vm.getListData(_vm.$route.query)},\"hideEditShopModal\":_vm.hideEditShopModal}}):_vm._e(),_vm._v(\" \"),(_vm.toastStatus)?_c('toast',{attrs:{\"message\":_vm.toastData.message,\"type\":_vm.toastData.type}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-84ab78f8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/admin/auth/List.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-84ab78f8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./List.vue\")\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-84ab78f8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./List.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./List.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./List.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-84ab78f8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./List.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-84ab78f8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/admin/auth/List.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}