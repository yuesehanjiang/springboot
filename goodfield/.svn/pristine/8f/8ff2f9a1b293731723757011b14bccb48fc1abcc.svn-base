webpackJsonp([29],{"5IQO":function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("t5DY"),o=a("5eyz"),n=a("y6zN"),c=a("SJI6"),r=a("/pQn"),i=a("7Gg6"),l=a("hNqL"),p=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])}return t},h={components:{Toast:l.a,Breadcrumb:i.a},data:function(){return{passPhoneForm:{oldPassword:"",phone:""},passPhoneRules:{oldPassword:Object(r.c)(),phone:Object(r.d)()},captchaForm:{captcha:""},captchaRules:{captcha:Object(r.b)()},toastStatus:!1,toastData:{},sendSmsStatus:!1,sendSmsTips:"发送验证码",count:60}},methods:p({sendSms:function(){var t=this;this.$refs.passPhoneForm.validate(function(s){if(s&&!t.sendSmsStatus){var a={password:t.passPhoneForm.oldPassword,phone:t.passPhoneForm.phone};t.cutdownTime(),Object(e.a)(a).then(function(s){"200"===s.code?t.setToastData({message:s.message,type:"success"}):t.setToastData({message:s.message,type:"fail"})})}})},cancel:function(){this.$refs.passPhoneForm.resetFields(),this.$refs.captchaForm.resetFields()},confirm:function(){var t=this;this.$refs.passPhoneForm.validate(function(s){t.$refs.captchaForm.validate(function(a){if(s&&a){var e={password:t.passPhoneForm.oldPassword,phone:t.passPhoneForm.phone,code:t.captchaForm.captcha};Object(o.e)(e).then(function(s){if("200"===s.code){var a=Object(n.a)();a.phone=t.passPhoneForm.phone,Object(n.c)(a),t.setLoginData(a),t.$refs.passPhoneForm.resetFields(),t.$refs.captchaForm.resetFields(),t.setToastData({message:s.message,callback:function(){Object(n.b)("admin")}})}else t.setToastData({message:s.message,type:"fail"})})}})})},cutdownTime:function(){this.sendSmsStatus=!0,this.sendSmsTips="倒计时"+this.count+"秒",this.count=this.count-1,this.timer=setTimeout(this.cutdownTime,1e3),this.count<0&&(this.sendSmsTips="发送验证码",this.count=60,this.sendSmsStatus=!1,clearTimeout(this.timer))},setToastData:function(t){var s=this,a=t.message,e=t.type,o=t.callback;this.toastStatus=!0,this.$set(this.toastData,"message",a),this.$set(this.toastData,"type",e),setTimeout(function(){s.toastStatus=!1,o()},1200)}},Object(c.mapMutations)({setLoginData:"SET_LOGIN_DATA"}))},m={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("breadcrumb"),t._v(" "),a("div",{staticClass:"form-container"},[a("h4",{staticClass:"form-title"},[t._v("绑定手机")]),t._v(" "),a("el-form",{ref:"passPhoneForm",staticClass:"form",attrs:{model:t.passPhoneForm,rules:t.passPhoneRules,"label-position":"left","label-width":"120px"}},[a("el-form-item",{staticStyle:{width:"350px"},attrs:{label:"原密码:",prop:"oldPassword"}},[a("el-input",{attrs:{maxlength:20,placeholder:"密码由 8 - 20 位字母和数字组成",type:"password"},model:{value:t.passPhoneForm.oldPassword,callback:function(s){t.$set(t.passPhoneForm,"oldPassword",s)},expression:"passPhoneForm.oldPassword"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"350px",position:"relative"},attrs:{label:"新绑定号码:",prop:"phone"}},[a("el-input",{attrs:{placeholder:"手机号码必须是11位",maxlength:11},model:{value:t.passPhoneForm.phone,callback:function(s){t.$set(t.passPhoneForm,"phone",s)},expression:"passPhoneForm.phone"}}),t._v(" "),a("span",{staticClass:"send-code",class:{active:t.sendSmsStatus},on:{click:t.sendSms}},[t._v(t._s(t.sendSmsTips))])],1)],1),t._v(" "),a("el-form",{ref:"captchaForm",staticClass:"form",attrs:{model:t.captchaForm,rules:t.captchaRules,"label-position":"left","label-width":"120px"}},[a("el-form-item",{staticStyle:{width:"350px"},attrs:{label:"验证码:",prop:"captcha"}},[a("el-input",{attrs:{placeholder:"验证码必须是6位",maxlength:6},model:{value:t.captchaForm.captcha,callback:function(s){t.$set(t.captchaForm,"captcha",s)},expression:"captchaForm.captcha"}})],1)],1),t._v(" "),a("div",{staticClass:"form-footer"},[a("span",{staticClass:"cancel-button",on:{click:t.cancel}},[t._v("重置")]),t._v(" "),a("span",{staticClass:"confirm-button",on:{click:t.confirm}},[t._v("确定")])]),t._v(" "),t.toastStatus?a("toast",{attrs:{message:t.toastData.message,type:t.toastData.type}}):t._e()],1)],1)},staticRenderFns:[]};var d=a("VU/8")(h,m,!1,function(t){a("caOM")},"data-v-70fddc6b",null);s.default=d.exports},caOM:function(t,s){}});
//# sourceMappingURL=29.5eab06eacbf605adc747.js.map