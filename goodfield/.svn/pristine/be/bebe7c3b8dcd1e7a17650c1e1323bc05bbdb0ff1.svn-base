webpackJsonp([7],{"9jSU":function(t,e,a){"use strict";var s=a("oAV5"),o=a.n(s),i={props:["initType","disable"],data:function(){return{activeTab:this.$props.initType,tabs:[{text:"管理员",type:0},{text:"用户",type:1}],scale:1}},computed:{transform:function(){return"scale("+this.scale+","+this.scale+")"}},mounted:function(){window.onresize=o.a.throttle(function(){},300)},destroyed:function(){window.onresize=null},methods:{checkScale:function(){var t=document.body.clientWidth/1600;t=t>1?t:1,this.scale=t},changeTabItem:function(t){if(!this.$props.disable){var e=parseInt(t.target.dataset.type);this.activeTab=e,this.$emit("change",e)}}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("div",{staticClass:"login-inner",style:{transform:t.transform}},[t._t("default"),t._v(" "),a("div",{staticClass:"tabs",on:{click:t.changeTabItem}},[this.$props.disable?[t._l(t.tabs,function(e,s){return[a("div",{directives:[{name:"show",rawName:"v-show",value:Number(t.activeTab)===e.type,expression:"Number(activeTab)===item.type"}],key:s,staticClass:"tab-item active",attrs:{"data-type":e.type}},[t._v("\n            "+t._s(e.text)+"\n          ")])]})]:t._l(t.tabs,function(e,s){return a("div",{key:s,staticClass:"tab-item",class:{active:Number(t.activeTab)===e.type},attrs:{"data-type":e.type}},[t._v("\n          "+t._s(e.text)+"\n        ")])})],2)],2)])},staticRenderFns:[]};var r=a("VU/8")(i,n,!1,function(t){a("XksY"),a("LSxK")},"data-v-36c643a6",null);e.a=r.exports},LSxK:function(t,e){},"TZ+C":function(t,e){},XksY:function(t,e){},lbHh:function(t,e,a){var s,o;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(i){if(void 0===(o="function"==typeof(s=i)?s.call(e,a,e,t):s)||(t.exports=o),!0,t.exports=i(),!!0){var n=window.Cookies,r=window.Cookies=i();r.noConflict=function(){return window.Cookies=n,r}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var a=arguments[t];for(var s in a)e[s]=a[s]}return e}return function e(a){function s(e,o,i){var n;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(i=t({path:"/"},s.defaults,i)).expires){var r=new Date;r.setMilliseconds(r.getMilliseconds()+864e5*i.expires),i.expires=r}i.expires=i.expires?i.expires.toUTCString():"";try{n=JSON.stringify(o),/^[\{\[]/.test(n)&&(o=n)}catch(t){}o=a.write?a.write(o,e):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var c="";for(var l in i)i[l]&&(c+="; "+l,!0!==i[l]&&(c+="="+i[l]));return document.cookie=e+"="+o+c}e||(n={});for(var u=document.cookie?document.cookie.split("; "):[],p=/(%[0-9A-Z]{2})+/g,d=0;d<u.length;d++){var f=u[d].split("="),m=f.slice(1).join("=");this.json||'"'!==m.charAt(0)||(m=m.slice(1,-1));try{var g=f[0].replace(p,decodeURIComponent);if(m=a.read?a.read(m,g):a(m,g)||m.replace(p,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(t){}if(e===g){n=m;break}e||(n[g]=m)}catch(t){}}return n}}return s.set=s,s.get=function(t){return s.call(s,t)},s.getJSON=function(){return s.apply({json:!0},[].slice.call(arguments))},s.defaults={},s.remove=function(e,a){s(e,"",t(a,{expires:-1}))},s.withConverter=e,s}(function(){})})},"ook+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("lbHh"),o=a.n(s),i=a("E4LH"),n=a("SJI6"),r=a("y6zN"),c=a("9jSU"),l=a("hNqL"),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},p={components:{Toast:l.a,Outer:c.a},data:function(){return{form:{},loginType:o.a.get("LOGIN_TYPE")||0,isRemember:!1,toastStatus:!1,loading:!1,toastData:{}}},computed:{loginRole:function(){return 0===Number(this.loginType)?"admin":"user"}},created:function(){this.setFormByStorage()},methods:u({getLoginRoleStorage:function(){return JSON.parse(localStorage.getItem(this.loginRole))},setFormByStorage:function(){var t=this.getLoginRoleStorage();if(!Object.is(t,null)){var e=(new Date).getTime();if(t.deadline<e)return void this.removeLocalStorage();this.isRemember=!0,this.form.account=t.account,this.form.password=t.password}},checkStorage:function(){var t=this.getLoginRoleStorage();t?(this.form.account=t.account,this.form.password=t.password,this.isRemember=!0):(this.form.account="",this.form.password="")},saveFormToStorage:function(t){var e=6048e5+(new Date).getTime();t.deadline=e,localStorage.setItem(this.loginRole,JSON.stringify(t))},removeLocalStorage:function(){localStorage.removeItem(this.loginRole)},loginTypeChange:function(t){this.loginType=t,this.checkStorage(),o.a.set("LOGIN_TYPE",t)},validateForm:function(){var t="";return!this.form.account||i.a.isNullString(this.form.account)?t="账号不能为空":this.form.password&&!i.a.isNullString(this.form.password)||(t="密码不能为空"),t&&this.setToastData({message:t,type:"fail"}),!t},login:function(){var t=this;if(!this.loading&&this.validateForm()){this.loading=!0;var e={account:this.form.account.trim(),password:this.form.password.trim(),loginType:this.loginType},a=Number(this.loginType)?"user":"admin";this.$store.dispatch("login",e).then(function(s){if("200"===s.code){if(t.isRemember)t.saveFormToStorage(e);else{var o=t.getLoginRoleStorage();Object.is(o,null)||t.removeLocalStorage()}s.data.type=a,Object(r.c)(s.data),t.setLoginData(s.data),t.$router.push({path:"/"+a})}else t.toastStatus=!0,t.setToastData({message:s.message,type:"fail"});t.loading=!1}).catch(function(){t.loading=!1})}},setToastData:function(t){var e=this,a=t.message,s=t.type,o=t.callback;this.toastStatus=!0,this.$set(this.toastData,"message",a),this.$set(this.toastData,"type",s),setTimeout(function(){e.toastStatus=!1,o&&o()},1200)},redirectToTargetPath:function(t){var e=t.currentTarget.dataset.path;this.$router.push({path:e,query:{type:this.loginType}})}},Object(n.mapMutations)({setLoginData:"SET_LOGIN_DATA"}))},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("outer",{attrs:{initType:t.loginType},on:{change:t.loginTypeChange}},[a("div",{staticClass:"left"}),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"login-form-logo"}),t._v(" "),a("div",{staticClass:"input-container"},[a("label",{staticClass:"label",attrs:{for:"account"}},[t._v("账号")]),t._v(" "),a("Input",{staticStyle:{width:"300px"},attrs:{size:"default",id:"account",placeholder:"admin"===t.loginRole?"账号":"账号 / 手机",clearable:""},on:{"on-enter":t.login},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),t._v(" "),a("div",{staticClass:"input-container"},[a("label",{staticClass:"label",attrs:{for:"password"}},[t._v("密码")]),t._v(" "),a("Input",{staticStyle:{width:"300px"},attrs:{size:"default",type:"password",id:"password",placeholder:"密码由8 - 20位字母和文字组成",clearable:""},on:{"on-enter":t.login},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),a("div",{staticClass:"remember-forget"},[a("span",{staticClass:"remember-check",on:{click:function(e){t.isRemember=!t.isRemember}}},[a("span",{staticClass:"check",class:{active:t.isRemember}}),t._v(" "),a("span",[t._v("记住密码")])]),t._v(" "),a("span",{staticClass:"forget-password",attrs:{"data-path":"/forget_password"},on:{click:t.redirectToTargetPath}},[t._v("忘记密码")])]),t._v(" "),a("button",{staticClass:"submit-button",class:{loading:t.loading},on:{click:t.login}},[t._v("登录")]),t._v(" "),a("div",{staticClass:"login-tip"},[a("p",[a("span",[t._v("第一次登录，请先设置密码。")]),t._v(" "),a("span",{staticClass:"setting",attrs:{"data-path":"/set_password"},on:{click:t.redirectToTargetPath}},[t._v("去设置 >>")])])])]),t._v(" "),t.toastStatus?a("toast",{attrs:{message:t.toastData.message,type:t.toastData.type}}):t._e()],1)},staticRenderFns:[]};var f=a("VU/8")(p,d,!1,function(t){a("TZ+C")},"data-v-11273b4f",null);e.default=f.exports}});
//# sourceMappingURL=7.5021abe1d1d70e3251dc.js.map