webpackJsonp([2],{"7UHt":function(t,e,a){"use strict";var i=a("sWI9"),s=a("pEmh"),n=a("LW0X");function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var o={name:"Rate",mixins:[i.a,s.a],components:{Icon:n.a},props:{count:{type:Number,default:5},value:{type:Number,default:0},allowHalf:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},name:{type:String},clearable:{type:Boolean,default:!1},character:{type:String,default:""},icon:{type:String,default:""},customIcon:{type:String,default:""}},data:function(){return{prefixCls:"ivu-rate",hoverIndex:-1,isHover:!1,isHalf:this.allowHalf&&this.value.toString().indexOf(".")>=0,currentValue:this.value}},computed:{classes:function(){return["ivu-rate",r({},"ivu-rate-disabled",this.disabled)]},iconClasses:function(){var t;return["ivu-icon",(t={},r(t,"ivu-icon-"+this.icon,""!==this.icon),r(t,""+this.customIcon,""!==this.customIcon),t)]},showCharacter:function(){return""!==this.character||""!==this.icon||""!==this.customIcon}},watch:{value:function(t){this.currentValue=t},currentValue:function(t){this.setHalf(t)}},methods:{starCls:function(t){var e,a=this.hoverIndex,i=this.isHover?a:this.currentValue,s=!1,n=!1;return i>=t&&(s=!0),n=this.isHover?i===t:Math.ceil(this.currentValue)===t,[(e={},r(e,"ivu-rate-star",!this.showCharacter),r(e,"ivu-rate-star-chart",this.showCharacter),r(e,"ivu-rate-star-full",!n&&s||n&&!this.isHalf),r(e,"ivu-rate-star-half",n&&this.isHalf),r(e,"ivu-rate-star-zero",!s),e)]},handleMousemove:function(t,e){if(!this.disabled){if(this.isHover=!0,this.allowHalf){var a=e.target.getAttribute("type")||!1;this.isHalf="half"===a}else this.isHalf=!1;this.hoverIndex=t}},handleMouseleave:function(){this.disabled||(this.isHover=!1,this.setHalf(this.currentValue),this.hoverIndex=-1)},setHalf:function(t){this.isHalf=this.allowHalf&&t.toString().indexOf(".")>=0},handleClick:function(t){this.disabled||(this.isHalf&&(t-=.5),this.clearable&&Math.abs(t-this.currentValue)<.01&&(t=0),this.currentValue=t,this.$emit("input",t),this.$emit("on-change",t),this.dispatch("FormItem","on-form-change",t))}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.classes,on:{mouseleave:t.handleMouseleave}},[a("input",{attrs:{type:"hidden",name:t.name},domProps:{value:t.currentValue}}),t._v(" "),t._l(t.count,function(e){return a("div",{key:e,class:t.starCls(e),on:{mousemove:function(a){t.handleMousemove(e,a)},click:function(a){t.handleClick(e)}}},[t.showCharacter?[a("span",{class:[t.prefixCls+"-star-first"],attrs:{type:"half"}},[""!==t.character?[t._v(t._s(t.character))]:a("i",{class:t.iconClasses,attrs:{type:"half"}})],2),t._v(" "),a("span",{class:[t.prefixCls+"-star-second"]},[""!==t.character?[t._v(t._s(t.character))]:a("i",{class:t.iconClasses})],2)]:[a("span",{class:[t.prefixCls+"-star-content"],attrs:{type:"half"}})]],2)}),t._v(" "),t.showText?a("div",{directives:[{name:"show",rawName:"v-show",value:t.currentValue>0,expression:"currentValue > 0"}],class:[t.prefixCls+"-text"]},[t._t("default",[a("span",[t._v(t._s(t.currentValue))]),t._v(" "),t.currentValue<=1?a("span",[t._v(t._s(t.t("i.rate.star")))]):a("span",[t._v(t._s(t.t("i.rate.stars")))])])],2):t._e()],2)},staticRenderFns:[]},c=a("VU/8")(o,l,!1,null,null,null).exports;e.a=c},Dwh8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7UHt"),s=(a("jAzQ"),a("+BTi"),a("wOhx")),n=a.n(s),r=a("EA3e"),o=a("X1cf"),l=a("E4LH"),c={components:{Breadcrumb:o.a,Upload:n.a,Rate:i.a},data:function(){return{preview:"",form:{image:"",name:"",sex:"1",rank:0,introduction:"",trainContent:""},isSubmitting:!1,isGettingData:!1}},watch:{"form.image":function(t){var e=this;if("string"!=typeof t){var a=new FileReader;a.readAsDataURL(this.form.image),a.addEventListener("load",function(){e.preview=a.result},{once:!0})}}},mounted:function(){var t=this;this.$route.params.id&&(this.isGettingData=!0,Object(r.d)({id:this.$route.params.id}).then(function(e){200===Number(e.code)?(t.isGettingData=!1,t.preview=e.data.image,t.form.name=e.data.name,t.form.sex=e.data.sex,t.form.rank=e.data.rank,t.form.introduction=e.data.introduction,t.form.trainContent=e.data.trainContent):t.$message({message:e.message,type:"error",onClose:function(){t.$router.back()}})}))},methods:{beforeUpload:function(t){var e="3M",a=3145728;return-1===["image/jpg","image/jpeg","image/png","image/bmp"].indexOf(t.type)?(this.$message({message:"文件格式错误，请上传jpg,jpeg,png,bmp文件",type:"warning"}),!1):t.size>a?(this.$message({message:"文件太大，请上传"+e+"以下的文件",type:"warning"}),!1):(this.form.image=t,!1)},validate:function(){return this.preview?!l.a.isNullString(this.form.name)||(this.$message({message:"请输入教练名称",type:"warning"}),!1):(this.$message({message:"请上传照片",type:"warning"}),!1)},handleSubmit:function(){this.validate()&&this.postData()},getFormData:function(){var t=new FormData;return t.append("gymAddr",this.$store.state.token),this.form.image&&t.append("file",this.form.image),t.append("name",this.form.name),t.append("sex",this.form.sex),t.append("rank",this.form.rank),t.append("introduction",this.form.introduction),t.append("trainContent",this.form.trainContent),t},postData:function(){var t=this;this.isSubmitting=!0;var e=this.getFormData(),a=void 0;this.$route.params.id?(e.append("id",this.$route.params.id),a=r.e):a=r.a,a(e).then(function(e){200===Number(e.code)?(t.$router.back(),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"warning"})}).finally(function(){t.isSubmitting=!1})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PageBody",[a("Breadcrumb",[a("router-link",{attrs:{tag:"li",to:"/wall"}},[t._v("教练墙")]),t._v(" "),a("li",[t._v("添加教练")])],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isGettingData,expression:"isGettingData"}],staticClass:"detail-form"},[a("div",{staticClass:"detail-item"},[a("div",{staticClass:"detail-label"},[t._v("上传照片")]),t._v(" "),a("div",{staticClass:"detail-control"},[a("Upload",{attrs:{action:"noAction","before-upload":t.beforeUpload}},[a("div",{staticClass:"picture-uploader"},[t.preview?a("img",{staticClass:"preview-img",attrs:{src:t.preview,alt:""}}):a("i",{staticClass:"add-picture-icon"})])])],1)]),t._v(" "),a("div",{staticClass:"detail-item"},[a("div",{staticClass:"detail-label"},[t._v("教练名称")]),t._v(" "),a("div",{staticClass:"detail-control"},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入教练名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)]),t._v(" "),a("div",{staticClass:"detail-item"},[a("div",{staticClass:"detail-label"},[t._v("用户性别")]),t._v(" "),a("div",{staticClass:"detail-control"},[a("Select",{staticStyle:{width:"200px"},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("Option",{attrs:{value:"1"}},[t._v("男")]),t._v(" "),a("Option",{attrs:{value:"0"}},[t._v("女")])],1)],1)]),t._v(" "),a("div",{staticClass:"detail-item"},[a("div",{staticClass:"detail-label rate-label"},[t._v("星级评分")]),t._v(" "),a("div",{staticClass:"detail-control"},[a("Rate",{staticClass:"rate-container",attrs:{"allow-half":"",value:Number(t.form.rank)/2},on:{"on-change":function(e){return t.form.rank=2*e}}})],1)]),t._v(" "),a("div",{staticClass:"detail-item"},[a("div",{staticClass:"detail-label"},[t._v("个人简介")]),t._v(" "),a("div",{staticClass:"detail-control"},[a("Input",{staticClass:"detail-text",attrs:{type:"textarea",placeholder:"请输入个人简介"},model:{value:t.form.introduction,callback:function(e){t.$set(t.form,"introduction",e)},expression:"form.introduction"}})],1)]),t._v(" "),a("div",{staticClass:"detail-item"},[a("div",{staticClass:"detail-label"},[t._v("训练介绍")]),t._v(" "),a("div",{staticClass:"detail-control"},[a("Input",{staticStyle:{"max-width":"540px"},attrs:{placeholder:"请输入训练介绍"},model:{value:t.form.trainContent,callback:function(e){t.$set(t.form,"trainContent",e)},expression:"form.trainContent"}})],1)]),t._v(" "),a("div",{staticClass:"detail-item"},[a("div",{staticClass:"detail-label"}),t._v(" "),a("div",{staticClass:"detail-control"},[a("button",{staticClass:"cancel-button",on:{click:function(){t.$router.back()}}},[t._v("取消")]),t._v(" "),a("button",{directives:[{name:"loading",rawName:"v-loading",value:t.isSubmitting,expression:"isSubmitting"}],staticClass:"confirm-button",on:{click:t.handleSubmit}},[t._v("确定")])])])])],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("XraO")},"data-v-0ae83784",null);e.default=d.exports},EA3e:function(t,e,a){"use strict";e.c=function(t){return Object(i.a)({method:"post",url:"/gym/coach/listCoachInfo",data:t})},e.a=function(t){return Object(i.a)({method:"post",url:"/gym/coach/saveCoach",data:t,headers:{"Content-Type":"multipart/form-data"}})},e.d=function(t){return Object(i.a)({method:"post",url:"/gym/coach/getCoachById",data:t})},e.e=function(t){return Object(i.a)({method:"post",url:"/gym/coach/updateCoach",data:t,headers:{"Content-Type":"multipart/form-data"}})},e.b=function(t){return Object(i.a)({method:"post",url:"/gym/coach/delCoach",data:t})};var i=a("vLgD")},X1cf:function(t,e,a){"use strict";var i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"breadcrumb-container"},[e("ul",{staticClass:"breadcrumb-list"},[this._t("default")],2)])},staticRenderFns:[]};var s=a("VU/8")(null,i,!1,function(t){a("Z5HE")},"data-v-090a826c",null);e.a=s.exports},XraO:function(t,e){},Z5HE:function(t,e){}});
//# sourceMappingURL=2.e635a23f5cdefee56757.js.map